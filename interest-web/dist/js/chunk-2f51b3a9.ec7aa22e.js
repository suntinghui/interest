(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2f51b3a9"],{"715f":function(e,t,s){},"9e59":function(e,t,s){"use strict";var n=s("715f"),o=s.n(n);o.a},fdda:function(e,t,s){"use strict";s.r(t);var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"home content-background"},[s("div",{staticClass:"user-content"},[e._m(0),s("div",{staticClass:"headimg",on:{click:function(t){return e.toggleShow()}}},[s("img",{attrs:{src:e.headImg}}),s("p",{staticClass:"head-btn"},[e._v("修改头像")])]),s("div",{staticClass:"info"},[s("Form",{attrs:{model:e.userInfo,"label-position":"top"}},[s("FormItem",{attrs:{label:"用户名"}},[s("Input",{model:{value:e.userInfo.name,callback:function(t){e.$set(e.userInfo,"name",t)},expression:"userInfo.name"}})],1),s("FormItem",{attrs:{label:"用户主页"}},[s("Input",{model:{value:e.userInfo.url,callback:function(t){e.$set(e.userInfo,"url",t)},expression:"userInfo.url"}})],1),s("FormItem",{attrs:{label:"邮箱地址"}},[s("Input",{model:{value:e.userInfo.email,callback:function(t){e.$set(e.userInfo,"email",t)},expression:"userInfo.email"}})],1),s("FormItem",{attrs:{label:"个人简介"}},[s("Input",{attrs:{type:"textarea",rows:3},model:{value:e.userInfo.info,callback:function(t){e.$set(e.userInfo,"info",t)},expression:"userInfo.info"}})],1),s("FormItem",{attrs:{label:"所在位置"}},[s("Input",{model:{value:e.userInfo.location,callback:function(t){e.$set(e.userInfo,"location",t)},expression:"userInfo.location"}})],1),s("FormItem",{attrs:{label:"擅长技能"}},[s("Input",{model:{value:e.userInfo.skill,callback:function(t){e.$set(e.userInfo,"skill",t)},expression:"userInfo.skill"}})],1),s("Button",{staticClass:"update-button",attrs:{type:"primary"},on:{click:e.updateInfo}},[e._v("更新")])],1)],1)]),s("my-upload",{ref:"upload",attrs:{field:"picture",width:200,height:200,url:"/interest/general/users/user/head-img/upload",headers:e.headers,"img-format":"png"},on:{"crop-upload-success":e.cropUploadSuccess,"crop-upload-fail":e.cropUploadFail},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}})],1)},o=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"subhead"},[s("h1",{staticClass:"title-text"},[e._v("个人信息")])])}],a=s("0b4d"),i={components:{"my-upload":a["a"]},data:function(){return{headImg:"",show:!1,headers:{Authorization:"bearer "+localStorage.getItem("currentUser_token")},userInfo:{headimg:null,name:null,url:null,email:null,info:null,location:null,skill:null}}},mounted:function(){this.getUserInfo()},methods:{toggleShow:function(){this.show=!this.show},cropUploadSuccess:function(e,t){this.axios({method:"patch",url:"/general/users/user/headImg",params:{headImg:e.data}}).then(function(t){this.headImg=e.data,this.show=!1,this.$Notice.success({title:"头像修改成功"}),this.$refs.upload.off()}.bind(this)).catch(function(e){alter(e)}.bind(this))},cropUploadFail:function(e,t){this.$Notice.error({title:"头像修改失败"}),this.$refs.upload.off()},userInfoSet:function(e){this.userInfo.headimg=e.headimg,this.userInfo.name=e.name,this.userInfo.url=e.url,this.userInfo.email=e.email,this.userInfo.info=e.info,this.userInfo.location=e.location,this.userInfo.skill=e.skill},getUserInfo:function(){this.axios({method:"get",url:"/general/users/user/info"}).then(function(e){this.userInfoSet(e.data.data),this.headImg=e.data.data.headimg}.bind(this)).catch(function(e){alter(e)}.bind(this))},updateInfo:function(){this.axios({method:"put",url:"/general/users/user/info",data:this.userInfo}).then(function(e){this.$Notice.success({title:"修改成功"})}.bind(this)).catch(function(e){alter(e)}.bind(this))}}},l=i,r=(s("9e59"),s("2877")),u=Object(r["a"])(l,n,o,!1,null,null,null);t["default"]=u.exports}}]);
//# sourceMappingURL=chunk-2f51b3a9.ec7aa22e.js.map