{"version":3,"sources":["webpack:///./src/views/template/user-info.vue?e0e6","webpack:///./src/views/template/user-info.vue?3a97","webpack:///src/views/template/user-info.vue","webpack:///./src/views/template/user-info.vue?0bc3","webpack:///./src/views/template/user-info.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_m","on","$event","toggleShow","attrs","headImg","_v","userInfo","model","value","callback","$$v","$set","expression","updateInfo","ref","headers","cropUploadSuccess","cropUploadFail","show","staticRenderFns","components","data","Authorization","mounted","methods","axios","method","url","params","jsonData","$Notice","success","$refs","upload","off","alter","error","component"],"mappings":"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","file":"js/chunk-2f51b3a9.ec7aa22e.js","sourcesContent":["import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./user-info.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./user-info.vue?vue&type=style&index=0&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"home content-background\"},[_c('div',{staticClass:\"user-content\"},[_vm._m(0),_c('div',{staticClass:\"headimg\",on:{\"click\":function($event){return _vm.toggleShow()}}},[_c('img',{attrs:{\"src\":_vm.headImg}}),_c('p',{staticClass:\"head-btn\"},[_vm._v(\"修改头像\")])]),_c('div',{staticClass:\"info\"},[_c('Form',{attrs:{\"model\":_vm.userInfo,\"label-position\":\"top\"}},[_c('FormItem',{attrs:{\"label\":\"用户名\"}},[_c('Input',{model:{value:(_vm.userInfo.name),callback:function ($$v) {_vm.$set(_vm.userInfo, \"name\", $$v)},expression:\"userInfo.name\"}})],1),_c('FormItem',{attrs:{\"label\":\"用户主页\"}},[_c('Input',{model:{value:(_vm.userInfo.url),callback:function ($$v) {_vm.$set(_vm.userInfo, \"url\", $$v)},expression:\"userInfo.url\"}})],1),_c('FormItem',{attrs:{\"label\":\"邮箱地址\"}},[_c('Input',{model:{value:(_vm.userInfo.email),callback:function ($$v) {_vm.$set(_vm.userInfo, \"email\", $$v)},expression:\"userInfo.email\"}})],1),_c('FormItem',{attrs:{\"label\":\"个人简介\"}},[_c('Input',{attrs:{\"type\":\"textarea\",\"rows\":3},model:{value:(_vm.userInfo.info),callback:function ($$v) {_vm.$set(_vm.userInfo, \"info\", $$v)},expression:\"userInfo.info\"}})],1),_c('FormItem',{attrs:{\"label\":\"所在位置\"}},[_c('Input',{model:{value:(_vm.userInfo.location),callback:function ($$v) {_vm.$set(_vm.userInfo, \"location\", $$v)},expression:\"userInfo.location\"}})],1),_c('FormItem',{attrs:{\"label\":\"擅长技能\"}},[_c('Input',{model:{value:(_vm.userInfo.skill),callback:function ($$v) {_vm.$set(_vm.userInfo, \"skill\", $$v)},expression:\"userInfo.skill\"}})],1),_c('Button',{staticClass:\"update-button\",attrs:{\"type\":\"primary\"},on:{\"click\":_vm.updateInfo}},[_vm._v(\"更新\")])],1)],1)]),_c('my-upload',{ref:\"upload\",attrs:{\"field\":\"picture\",\"width\":200,\"height\":200,\"url\":\"/interest/general/users/user/head-img/upload\",\"headers\":_vm.headers,\"img-format\":\"png\"},on:{\"crop-upload-success\":_vm.cropUploadSuccess,\"crop-upload-fail\":_vm.cropUploadFail},model:{value:(_vm.show),callback:function ($$v) {_vm.show=$$v},expression:\"show\"}})],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"subhead\"},[_c('h1',{staticClass:\"title-text\"},[_vm._v(\"个人信息\")])])}]\n\nexport { render, staticRenderFns }","<template>\r\n    <div class=\"home content-background\">\r\n    \t<div class=\"user-content\">\r\n    \t\t<div class=\"subhead\">\r\n    \t\t\t<h1 class=\"title-text\">个人信息</h1>\r\n    \t\t</div>\r\n    \t\t<div class=\"headimg\" @click=\"toggleShow()\">\r\n    \t\t\t<img :src=\"headImg\">\r\n          <p class=\"head-btn\">修改头像</p>\r\n    \t\t</div>\r\n    \t\t<div class=\"info\">\r\n    \t\t\t<Form :model=\"userInfo\" label-position=\"top\">\r\n\t\t\t        <FormItem label=\"用户名\">\r\n\t\t\t            <Input v-model=\"userInfo.name\"></Input>\r\n\t\t\t        </FormItem>\r\n\t\t\t        <FormItem label=\"用户主页\">\r\n\t\t\t            <Input v-model=\"userInfo.url\"></Input>\r\n\t\t\t        </FormItem>\r\n\t\t\t        <FormItem label=\"邮箱地址\">\r\n\t\t\t            <Input v-model=\"userInfo.email\"></Input>\r\n\t\t\t        </FormItem>\r\n\t\t\t        <FormItem label=\"个人简介\">\r\n\t\t\t            <Input v-model=\"userInfo.info\" type=\"textarea\" :rows=\"3\"></Input>\r\n\t\t\t        </FormItem>\r\n\t\t\t        <FormItem label=\"所在位置\">\r\n\t\t\t            <Input v-model=\"userInfo.location\"></Input>\r\n\t\t\t        </FormItem>\r\n\t\t\t        <FormItem label=\"擅长技能\">\r\n\t\t\t            <Input v-model=\"userInfo.skill\"></Input>\r\n\t\t\t        </FormItem>\r\n\t\t\t        <Button type=\"primary\" class=\"update-button\" @click=\"updateInfo\">更新</Button>\r\n\t\t\t    </Form>\r\n    \t\t</div>\r\n    \t</div>\r\n      <my-upload \r\n        ref=\"upload\"\r\n        field=\"picture\"\r\n        v-model=\"show\"\r\n        :width=\"200\"\r\n        :height=\"200\"\r\n        url=\"/interest/general/users/user/head-img/upload\"\r\n        :headers=\"headers\"\r\n        img-format=\"png\"\r\n        @crop-upload-success=\"cropUploadSuccess\"\r\n        @crop-upload-fail=\"cropUploadFail\">\r\n      </my-upload>\r\n    </div>\r\n</template>\r\n<script>\r\nimport myUpload from 'vue-image-crop-upload';\r\nexport default {\r\n  components: {\r\n    'my-upload': myUpload\r\n  },\r\n  data() {\r\n    return {\r\n      headImg:'',\r\n      show: false,\r\n      headers: {\r\n        Authorization:'bearer '+ localStorage.getItem(\"currentUser_token\")\r\n      },\r\n    \tuserInfo: {\r\n    \t\theadimg:null,\r\n    \t\tname:null,\r\n    \t\turl:null,\r\n    \t\temail:null,\r\n    \t\tinfo:null,\r\n    \t\tlocation:null,\r\n    \t\tskill:null\r\n    \t}\r\n    };\r\n  },\r\n  mounted() {\r\n  \tthis.getUserInfo();\r\n  },\r\n  methods: {\r\n    toggleShow() {\r\n      this.show = !this.show;\r\n    },\r\n    cropUploadSuccess(jsonData, field){\r\n      this.axios({\r\n        method: \"patch\",\r\n        url: \"/general/users/user/headImg\",\r\n        params: {\r\n          headImg: jsonData.data\r\n        }\r\n      })\r\n      .then(function(response) {\r\n        this.headImg = jsonData.data;\r\n        this.show = false;\r\n        this.$Notice.success({title: '头像修改成功'});\r\n        this.$refs.upload.off();\r\n      }.bind(this))\r\n      .catch(function(error) {\r\n        alter(error);\r\n      }.bind(this));\r\n    },\r\n    cropUploadFail(status, field){\r\n      this.$Notice.error({title: '头像修改失败'});\r\n      this.$refs.upload.off();\r\n    },\r\n  \tuserInfoSet(e){\r\n  \t\tthis.userInfo.headimg = e.headimg;\r\n  \t\tthis.userInfo.name = e.name;\r\n  \t\tthis.userInfo.url = e.url;\r\n  \t\tthis.userInfo.email = e.email;\r\n  \t\tthis.userInfo.info = e.info;\r\n  \t\tthis.userInfo.location = e.location;\r\n  \t\tthis.userInfo.skill = e.skill;\r\n  \t},\r\n  \tgetUserInfo(){\r\n  \t\tthis.axios({\r\n\t        method: \"get\",\r\n\t        url: \"/general/users/user/info\"\r\n\t    })\r\n\t    .then(\r\n          function(response) {\r\n            this.userInfoSet(response.data.data);\r\n            this.headImg = response.data.data.headimg;\r\n          }.bind(this)\r\n        )\r\n        .catch(\r\n          function(error) {\r\n            alter(error);\r\n          }.bind(this)\r\n        );\r\n  \t},\r\n  \tupdateInfo(){\r\n  \t\tthis.axios({\r\n  \t\t\tmethod: \"put\",\r\n  \t\t\turl: \"/general/users/user/info\",\r\n  \t\t\tdata: this.userInfo\r\n  \t\t})\r\n  \t\t.then(\r\n          function(response) {\r\n            this.$Notice.success({title: '修改成功'});\r\n          }.bind(this)\r\n        )\r\n        .catch(\r\n          function(error) {\r\n            alter(error);\r\n          }.bind(this)\r\n        );\r\n  \t}\r\n  }\r\n};\r\n</script>\r\n<style>\r\n.ivu-form .ivu-form-item-label {\r\n\tcolor: #24292e;\r\n}\r\n.content-background {\r\n  background: #fff;\r\n}\r\n.user-content {\r\n\twidth: 550px;\r\n\tmargin:0 auto;\r\n\theight: 625px;\r\n}\r\n.user-content .subhead {\r\n    border-bottom: 1px solid #e1e4e8;\r\n    padding-bottom: 8px;\r\n    text-align: center;\r\n}\r\n.user-content .title-text {\r\n\tcolor: #24292e;\r\n}\r\n.user-content .info {\r\n\tpadding:16px 16px;\r\n\tfloat: left;\r\n    width: 400px;\r\n    color: #24292e;\r\n}\r\n.user-content .info label {\r\n\tcolor: #24292e;\r\n}\r\n.user-content .headimg {\r\n\tfloat: left;\r\n\tmargin-top: 16px;\r\n  padding: 0 16px;\r\n  cursor: pointer;\r\n}\r\n.user-content .headimg img {\r\n\twidth: 100px;\r\n    height: 100px;\r\n    border-radius: 50%;\r\n    margin: 0 auto;\r\n}\r\n.user-content .update-button {\r\n\twidth: 100%;\r\n}\r\n.head-btn {\r\n  padding: 5px 15px 6px;\r\n  font-size: 12px;\r\n  border-radius: 4px;\r\n  color: #47cb89;\r\n  text-align: center;\r\n  border: 1px solid #47cb89;\r\n}\r\n.head-btn:hover{\r\n  background: rgba(244,252,248,.5);\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./user-info.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./user-info.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./user-info.vue?vue&type=template&id=11ae13ea&\"\nimport script from \"./user-info.vue?vue&type=script&lang=js&\"\nexport * from \"./user-info.vue?vue&type=script&lang=js&\"\nimport style0 from \"./user-info.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}