(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a984fd46"],{4697:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"mywork"}},[i("div",{staticClass:"page-header-main"},[i("div",{staticClass:"width-80 margin-auto margin-top-2 flex-direction-column flex-justify-center flex-items-center"},[i("div",{staticClass:"article"},[i("div",{staticClass:"ql-container ql-snow"},[i("div",{staticClass:"ql-editor"},[i("div",{staticClass:"title line-height-40 font-size-22"},[t._v(t._s(t.article.title))]),i("dl",{staticClass:"list-user-other"},[i("dt",[i("a",{attrs:{href:t.$store.state.userUrlPre+t.article.userid,target:"_blank"}},[i("img",{staticStyle:{width:"25px",height:"25px","border-radius":"100%"},attrs:{src:t.article.userHeadImg}})])]),i("dd",[i("a",{attrs:{href:t.$store.state.userUrlPre+t.article.userid,target:"_blank"}},[t._v(t._s(t.article.userName))])]),i("dd",[i("span",{staticClass:"text"},[t._v("阅读数:")]),i("span",{staticClass:"num"},[t._v(t._s(t.article.clickRate))])]),i("dd",[t._v(t._s(t.article.createTime))])]),i("div",{staticClass:"box-flex width-100 margin-auto margin-top-1 margin-bottom-1 border-top border-color-bfbfbf"}),i("div",{staticClass:"content",domProps:{innerHTML:t._s(t.article.content)}})])])]),i("div",{staticClass:"comment-append-section",attrs:{id:"commentAppendArea"}},[i("Input",{ref:"commentInputDom",attrs:{type:"textarea",rows:t.commentAppendInput,placeholder:"添加评论"},on:{"on-blur":t.toggleInput,"on-focus":t.focusInput},model:{value:t.commentAppend,callback:function(e){t.commentAppend=e},expression:"commentAppend"}}),i("Button",{staticStyle:{"margin-top":"10px"},attrs:{type:"primary"},on:{click:function(e){return t.publishComment()}}},[t._v("发表评论")])],1),i("div",{staticClass:"comment-section"},[i("ul",{staticClass:"reply-list"},t._l(t.comments,(function(e,s){return i("li",{key:e.id,staticClass:"reply-item"},[i("div",{staticClass:"user"},[i("a",{attrs:{href:t.$store.state.userUrlPre+e.userid,target:"_blank"}},[i("img",{staticClass:"avatar",attrs:{src:e.userHeadImg,title:e.userName}})]),i("div",{staticClass:"title-info"},[i("a",{attrs:{href:t.$store.state.userUrlPre+e.userid,target:"_blank"}},[i("span",{staticClass:"user-name"},[t._v(t._s(e.userName))])]),i("span",[t._v("# "+t._s(s+1)+" 楼 • "+t._s(e.creatTimeBy))])]),i("div",{staticClass:"title-info-other"},[i("span",[i("a",{directives:[{name:"show",rawName:"v-show",value:!e.showContent,expression:"!comment.showContent"}],on:{click:function(e){return t.changeContent(s)}}},[t._v("查看回复("+t._s(e.childCommentsCount)+")")]),i("a",{directives:[{name:"show",rawName:"v-show",value:e.showContent,expression:"comment.showContent"}],on:{click:function(e){return t.changeContent(s)}}},[t._v("收起回复")]),i("a",{on:{click:function(i){return t.writeComment(e,1)}}},[t._v("回复")])])])]),i("div",{staticClass:"reply-info"},[i("div",{staticClass:"reply-content"},[t._v("\n                                    "+t._s(e.comment)+"\n                                ")])]),i("ul",{directives:[{name:"show",rawName:"v-show",value:e.showContent,expression:"comment.showContent"}],staticClass:"reply-child-list"},t._l(e.childComments,(function(e,s){return i("li",{key:e.id,staticClass:"reply-item"},[i("div",{staticClass:"reply-info"},[i("div",{staticClass:"title-info"},[i("a",{attrs:{href:t.$store.state.userUrlPre+e.userid,target:"_blank"}},[i("img",{staticClass:"avatar",attrs:{src:e.userHeadImg,title:e.userName}})]),i("div",{staticClass:"title-info-right"},[i("a",{attrs:{href:t.$store.state.userUrlPre+e.userid,target:"_blank"}},[i("span",{staticClass:"user-name"},[t._v(t._s(e.userName))])]),i("span",[t._v("回复")]),i("span",{staticClass:"user-name"},[t._v(t._s(e.replierName)+":")]),i("span",[t._v(t._s(e.comment))]),i("span",{staticClass:"reply-time"},[t._v("("+t._s(e.creatTimeBy)+")")]),i("a",{on:{click:function(i){return t.writeComment(e,2)}}},[t._v("回复")])])])])])})),0)])})),0),t.total>10?i("Page",{staticClass:"pagin",attrs:{total:t.total,size:"small","show-elevator":""},on:{"on-change":function(e){t.pageSearch(e)}}}):t._e()],1)])])])},a=[],n={data:function(){return{articleId:null,article:{id:"",title:"",content:"",clickRate:"",commentCount:"",createTime:"",userid:"",userName:"",userHeadImg:"",githuburl:""},comments:[],page:0,pageSize:10,total:0,commentAppend:"",commentAppendInput:1,appendActive:!1,articleComment:{articleid:null,articleOwnerId:null,parentid:null,comment:null,replierId:null,replierName:null}}},mounted:function(){this.articleId=this.$route.params.id,this.getArticle(this.$route.params.id),this.getComments()},methods:{getArticle:function(t){this.axios({method:"get",url:"/public/articles/article/"+t}).then(function(t){this.articleSet(t.data.data)}.bind(this)).catch(function(t){}.bind(this))},articleSet:function(t){this.article.id=t.id,this.article.title=t.title,this.article.content=t.content,this.article.clickRate=t.clickRate,this.article.commentCount=t.commentCount,this.article.createTime=this.dateGet(t.createTime),this.article.userid=t.userid,this.article.userName=t.userName,this.article.userHeadImg=t.userHeadImg,this.article.githuburl=t.githuburl},articleCommentSet:function(t){this.articleComment.articleid=t.articleid,this.articleComment.parentid=t.parentid,this.articleComment.comment=t.comment,this.articleComment.replierId=t.replierId,this.articleComment.replierName=t.replierName,this.articleComment.articleOwnerId=this.article.userid},articleCommentInit:function(){this.articleComment.articleid=null,this.articleComment.parentid=null,this.articleComment.comment=null,this.articleComment.replierId=null,this.articleComment.replierName=null,this.articleComment.articleOwnerId=null},getComments:function(){this.axios({method:"get",url:"/public/article/comment",params:{articleId:this.articleId,page:this.page,pageSize:this.pageSize}}).then(function(t){var e=t.data.data,i=!0,s=!1,a=void 0;try{for(var n,r=e.data[Symbol.iterator]();!(i=(n=r.next()).done);i=!0){var l=n.value;l.creatTimeBy=this.latestTimeFormat(l.createTime),l.showContent=!1;var c=!0,o=!1,m=void 0;try{for(var u,d=l.childComments[Symbol.iterator]();!(c=(u=d.next()).done);c=!0){var h=u.value;h.creatTimeBy=this.latestTimeFormat(h.createTime)}}catch(p){o=!0,m=p}finally{try{c||null==d.return||d.return()}finally{if(o)throw m}}}}catch(p){s=!0,a=p}finally{try{i||null==r.return||r.return()}finally{if(s)throw a}}this.comments=e.data,this.total=e.totalCount}.bind(this)).catch(function(t){}.bind(this))},focusInput:function(t){this.commentAppendInput=3},writeComment:function(t,e){this.commentAppendInput=3;var i=this.$el.querySelector("#commentAppendArea");document.body.scrollTop=i.offsetTop,this.appendActive=!0,1==e?(this.articleComment.articleid=this.articleId,this.articleComment.parentid=t.id,this.articleComment.comment=null,this.articleComment.replierId=t.userid,this.articleComment.replierName=t.userName):2==e&&(this.articleComment.articleid=this.articleId,this.articleComment.parentid=t.parentid,this.articleComment.comment=null,this.articleComment.replierId=t.userid,this.articleComment.replierName=t.userName),this.commentAppend="[reply]"+t.userName+"[/reply]\n"},publishComment:function(){if(null!=this.axios.defaults.headers.common["Authorization"]&&""!=this.axios.defaults.headers.common["Authorization"])if(null!=this.commentAppend&&""!=this.commentAppend)if(null!=this.articleComment.replierName){var t=this.commentAppend.substring(0,15+this.articleComment.replierName.length),e="[reply]"+this.articleComment.replierName+"[/reply]";t==e?(this.articleComment.comment=this.commentAppend.substring(t.length),this.articleComment.articleOwnerId=this.article.userid,this.postComment(this.articleComment)):this.postComment({articleid:this.articleId,comment:this.commentAppend,articleOwnerId:this.article.userid})}else this.postComment({articleid:this.articleId,comment:this.commentAppend,articleOwnerId:this.article.userid});else this.$Message.error("请输入评论");else this.$Message.error("请登录")},postComment:function(t){this.axios({method:"post",url:"/article/comment",data:t}).then(function(t){this.$Message.success("评论成功"),this.getComments(),this.articleCommentInit(),this.commentAppend=null}.bind(this)).catch(function(){this.$Message.error("评论失败，请稍后重试！")}.bind(this))},changeContent:function(t){var e=this.comments[t];e.showContent=!e.showContent,this.comments.splice(t,1,e)},pageSearch:function(t){this.page=t-1,this.getComments()}}},r=n,l=(i("8600"),i("2877")),c=Object(l["a"])(r,s,a,!1,null,"0ec43fc3",null);e["default"]=c.exports},8600:function(t,e,i){"use strict";var s=i("fd0d"),a=i.n(s);a.a},fd0d:function(t,e,i){}}]);
//# sourceMappingURL=chunk-a984fd46.6bafdbcc.js.map