{"remainingRequest":"E:\\workspace\\javaEE\\interest\\interest-web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\workspace\\javaEE\\interest\\interest-web\\src\\views\\template\\user-info.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\workspace\\javaEE\\interest\\interest-web\\src\\views\\template\\user-info.vue","mtime":1568861049963},{"path":"E:\\workspace\\javaEE\\interest\\interest-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\workspace\\javaEE\\interest\\interest-web\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\workspace\\javaEE\\interest\\interest-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\workspace\\javaEE\\interest\\interest-web\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nimport myUpload from 'vue-image-crop-upload';\r\nexport default {\r\n  components: {\r\n    'my-upload': myUpload\r\n  },\r\n  data() {\r\n    return {\r\n      headImg:'',\r\n      show: false,\r\n      headers: {\r\n        Authorization:'bearer '+ localStorage.getItem(\"currentUser_token\")\r\n      },\r\n    \tuserInfo: {\r\n    \t\theadimg:null,\r\n    \t\tname:null,\r\n    \t\turl:null,\r\n    \t\temail:null,\r\n    \t\tinfo:null,\r\n    \t\tlocation:null,\r\n    \t\tskill:null\r\n    \t}\r\n    };\r\n  },\r\n  mounted() {\r\n  \tthis.getUserInfo();\r\n  },\r\n  methods: {\r\n    toggleShow() {\r\n      this.show = !this.show;\r\n    },\r\n    cropUploadSuccess(jsonData, field){\r\n      this.axios({\r\n        method: \"patch\",\r\n        url: \"/general/users/user/headImg\",\r\n        params: {\r\n          headImg: jsonData.data\r\n        }\r\n      })\r\n      .then(function(response) {\r\n        this.headImg = jsonData.data;\r\n        this.show = false;\r\n        this.$Notice.success({title: '头像修改成功'});\r\n        this.$refs.upload.off();\r\n      }.bind(this))\r\n      .catch(function(error) {\r\n        alter(error);\r\n      }.bind(this));\r\n    },\r\n    cropUploadFail(status, field){\r\n      this.$Notice.error({title: '头像修改失败'});\r\n      this.$refs.upload.off();\r\n    },\r\n  \tuserInfoSet(e){\r\n  \t\tthis.userInfo.headimg = e.headimg;\r\n  \t\tthis.userInfo.name = e.name;\r\n  \t\tthis.userInfo.url = e.url;\r\n  \t\tthis.userInfo.email = e.email;\r\n  \t\tthis.userInfo.info = e.info;\r\n  \t\tthis.userInfo.location = e.location;\r\n  \t\tthis.userInfo.skill = e.skill;\r\n  \t},\r\n  \tgetUserInfo(){\r\n  \t\tthis.axios({\r\n\t        method: \"get\",\r\n\t        url: \"/general/users/user/info\"\r\n\t    })\r\n\t    .then(\r\n          function(response) {\r\n            this.userInfoSet(response.data.data);\r\n            this.headImg = response.data.data.headimg;\r\n          }.bind(this)\r\n        )\r\n        .catch(\r\n          function(error) {\r\n            alter(error);\r\n          }.bind(this)\r\n        );\r\n  \t},\r\n  \tupdateInfo(){\r\n  \t\tthis.axios({\r\n  \t\t\tmethod: \"put\",\r\n  \t\t\turl: \"/general/users/user/info\",\r\n  \t\t\tdata: this.userInfo\r\n  \t\t})\r\n  \t\t.then(\r\n          function(response) {\r\n            this.$Notice.success({title: '修改成功'});\r\n          }.bind(this)\r\n        )\r\n        .catch(\r\n          function(error) {\r\n            alter(error);\r\n          }.bind(this)\r\n        );\r\n  \t}\r\n  }\r\n};\r\n",{"version":3,"sources":["user-info.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"user-info.vue","sourceRoot":"src/views/template","sourcesContent":["<template>\r\n    <div class=\"home content-background\">\r\n    \t<div class=\"user-content\">\r\n    \t\t<div class=\"subhead\">\r\n    \t\t\t<h1 class=\"title-text\">个人信息</h1>\r\n    \t\t</div>\r\n    \t\t<div class=\"headimg\" @click=\"toggleShow()\">\r\n    \t\t\t<img :src=\"headImg\">\r\n          <p class=\"head-btn\">修改头像</p>\r\n    \t\t</div>\r\n    \t\t<div class=\"info\">\r\n    \t\t\t<Form :model=\"userInfo\" label-position=\"top\">\r\n\t\t\t        <FormItem label=\"用户名\">\r\n\t\t\t            <Input v-model=\"userInfo.name\"></Input>\r\n\t\t\t        </FormItem>\r\n\t\t\t        <FormItem label=\"用户主页\">\r\n\t\t\t            <Input v-model=\"userInfo.url\"></Input>\r\n\t\t\t        </FormItem>\r\n\t\t\t        <FormItem label=\"邮箱地址\">\r\n\t\t\t            <Input v-model=\"userInfo.email\"></Input>\r\n\t\t\t        </FormItem>\r\n\t\t\t        <FormItem label=\"个人简介\">\r\n\t\t\t            <Input v-model=\"userInfo.info\" type=\"textarea\" :rows=\"3\"></Input>\r\n\t\t\t        </FormItem>\r\n\t\t\t        <FormItem label=\"所在位置\">\r\n\t\t\t            <Input v-model=\"userInfo.location\"></Input>\r\n\t\t\t        </FormItem>\r\n\t\t\t        <FormItem label=\"擅长技能\">\r\n\t\t\t            <Input v-model=\"userInfo.skill\"></Input>\r\n\t\t\t        </FormItem>\r\n\t\t\t        <Button type=\"primary\" class=\"update-button\" @click=\"updateInfo\">更新</Button>\r\n\t\t\t    </Form>\r\n    \t\t</div>\r\n    \t</div>\r\n      <my-upload \r\n        ref=\"upload\"\r\n        field=\"picture\"\r\n        v-model=\"show\"\r\n        :width=\"200\"\r\n        :height=\"200\"\r\n        url=\"/interest/general/users/user/head-img/upload\"\r\n        :headers=\"headers\"\r\n        img-format=\"png\"\r\n        @crop-upload-success=\"cropUploadSuccess\"\r\n        @crop-upload-fail=\"cropUploadFail\">\r\n      </my-upload>\r\n    </div>\r\n</template>\r\n<script>\r\nimport myUpload from 'vue-image-crop-upload';\r\nexport default {\r\n  components: {\r\n    'my-upload': myUpload\r\n  },\r\n  data() {\r\n    return {\r\n      headImg:'',\r\n      show: false,\r\n      headers: {\r\n        Authorization:'bearer '+ localStorage.getItem(\"currentUser_token\")\r\n      },\r\n    \tuserInfo: {\r\n    \t\theadimg:null,\r\n    \t\tname:null,\r\n    \t\turl:null,\r\n    \t\temail:null,\r\n    \t\tinfo:null,\r\n    \t\tlocation:null,\r\n    \t\tskill:null\r\n    \t}\r\n    };\r\n  },\r\n  mounted() {\r\n  \tthis.getUserInfo();\r\n  },\r\n  methods: {\r\n    toggleShow() {\r\n      this.show = !this.show;\r\n    },\r\n    cropUploadSuccess(jsonData, field){\r\n      this.axios({\r\n        method: \"patch\",\r\n        url: \"/general/users/user/headImg\",\r\n        params: {\r\n          headImg: jsonData.data\r\n        }\r\n      })\r\n      .then(function(response) {\r\n        this.headImg = jsonData.data;\r\n        this.show = false;\r\n        this.$Notice.success({title: '头像修改成功'});\r\n        this.$refs.upload.off();\r\n      }.bind(this))\r\n      .catch(function(error) {\r\n        alter(error);\r\n      }.bind(this));\r\n    },\r\n    cropUploadFail(status, field){\r\n      this.$Notice.error({title: '头像修改失败'});\r\n      this.$refs.upload.off();\r\n    },\r\n  \tuserInfoSet(e){\r\n  \t\tthis.userInfo.headimg = e.headimg;\r\n  \t\tthis.userInfo.name = e.name;\r\n  \t\tthis.userInfo.url = e.url;\r\n  \t\tthis.userInfo.email = e.email;\r\n  \t\tthis.userInfo.info = e.info;\r\n  \t\tthis.userInfo.location = e.location;\r\n  \t\tthis.userInfo.skill = e.skill;\r\n  \t},\r\n  \tgetUserInfo(){\r\n  \t\tthis.axios({\r\n\t        method: \"get\",\r\n\t        url: \"/general/users/user/info\"\r\n\t    })\r\n\t    .then(\r\n          function(response) {\r\n            this.userInfoSet(response.data.data);\r\n            this.headImg = response.data.data.headimg;\r\n          }.bind(this)\r\n        )\r\n        .catch(\r\n          function(error) {\r\n            alter(error);\r\n          }.bind(this)\r\n        );\r\n  \t},\r\n  \tupdateInfo(){\r\n  \t\tthis.axios({\r\n  \t\t\tmethod: \"put\",\r\n  \t\t\turl: \"/general/users/user/info\",\r\n  \t\t\tdata: this.userInfo\r\n  \t\t})\r\n  \t\t.then(\r\n          function(response) {\r\n            this.$Notice.success({title: '修改成功'});\r\n          }.bind(this)\r\n        )\r\n        .catch(\r\n          function(error) {\r\n            alter(error);\r\n          }.bind(this)\r\n        );\r\n  \t}\r\n  }\r\n};\r\n</script>\r\n<style>\r\n.ivu-form .ivu-form-item-label {\r\n\tcolor: #24292e;\r\n}\r\n.content-background {\r\n  background: #fff;\r\n}\r\n.user-content {\r\n\twidth: 550px;\r\n\tmargin:0 auto;\r\n\theight: 625px;\r\n}\r\n.user-content .subhead {\r\n    border-bottom: 1px solid #e1e4e8;\r\n    padding-bottom: 8px;\r\n    text-align: center;\r\n}\r\n.user-content .title-text {\r\n\tcolor: #24292e;\r\n}\r\n.user-content .info {\r\n\tpadding:16px 16px;\r\n\tfloat: left;\r\n    width: 400px;\r\n    color: #24292e;\r\n}\r\n.user-content .info label {\r\n\tcolor: #24292e;\r\n}\r\n.user-content .headimg {\r\n\tfloat: left;\r\n\tmargin-top: 16px;\r\n  padding: 0 16px;\r\n  cursor: pointer;\r\n}\r\n.user-content .headimg img {\r\n\twidth: 100px;\r\n    height: 100px;\r\n    border-radius: 50%;\r\n    margin: 0 auto;\r\n}\r\n.user-content .update-button {\r\n\twidth: 100%;\r\n}\r\n.head-btn {\r\n  padding: 5px 15px 6px;\r\n  font-size: 12px;\r\n  border-radius: 4px;\r\n  color: #47cb89;\r\n  text-align: center;\r\n  border: 1px solid #47cb89;\r\n}\r\n.head-btn:hover{\r\n  background: rgba(244,252,248,.5);\r\n}\r\n</style>\r\n"]}]}