{"remainingRequest":"E:\\workspace\\javaEE\\interest\\interest-web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\workspace\\javaEE\\interest\\interest-web\\src\\views\\article\\pc\\article-detail.vue?vue&type=style&index=0&id=48c4fcbe&scoped=true&lang=scss&","dependencies":[{"path":"E:\\workspace\\javaEE\\interest\\interest-web\\src\\views\\article\\pc\\article-detail.vue","mtime":1568861049869},{"path":"E:\\workspace\\javaEE\\interest\\interest-web\\node_modules\\css-loader\\index.js","mtime":499162500000},{"path":"E:\\workspace\\javaEE\\interest\\interest-web\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"E:\\workspace\\javaEE\\interest\\interest-web\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"E:\\workspace\\javaEE\\interest\\interest-web\\node_modules\\sass-loader\\lib\\loader.js","mtime":1533139052000},{"path":"E:\\workspace\\javaEE\\interest\\interest-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\workspace\\javaEE\\interest\\interest-web\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n.article {\n    width: 100%;\n    background: #fff;\n    margin-bottom: 20px;\n}\n\n.title {\n    color: black;\n}\n\n.list-user-other {\n    margin: 10px 0px;\n    height: 24px;\n    line-height: 24px;\n}\n\n.list-user-other dt {\n    float: left;\n    margin: 0 6px 0 0;\n}\n\n.list-user-other dd {\n    float: left;\n    font-size: 14px;\n    color: #8a8a8a;\n    line-height: 24px;\n    margin-right: 10px;\n}\n\n.list-user-other .text {\n    margin-right: 4px;\n    color: #8a8a8a;\n}\n\n.list-user-other .num {\n    color: #3399ea;\n}\n\n.content {\n    overflow: hidden;\n}\n.content img{\n    max-width: 100%;\n}\n\n.comment-section {\n    flex-direction: column;\n    margin-top: 5px;\n    background-color: #fff;\n    overflow: hidden;\n\n    ul {\n        list-style: none;\n    }\n\n    image {\n        margin-right: 10px;\n        border-radius: 6px;\n\n    }\n\n    .avatar {\n        margin-right: 6px;\n        border-radius: 20px;\n        width: 26px;\n        height: 26px;\n    }\n\n    .reply-count {\n        padding: 12px 15px;\n        background-color: #eee;\n    }\n\n    .reply-list {\n        display: flex;\n        flex-direction: column;\n\n        .reply-item {\n            display: flex;\n            padding: 12px 15px;\n            border-bottom: 1px solid #f0f0f0;\n            flex-direction: column;\n\n            .user {\n                flex: 0 0 26px;\n\n                .avatar {\n                    margin-right: 6px;\n                    border-radius: 20px;\n                    width: 26px;\n                    height: 26px;\n                    float: left;\n                }\n                .title-info {\n                    font-size: 12px;\n                    float:left;\n                    margin-top: 4px;\n\n                    .user-name {\n                        margin: 0 4px;\n                        color: #666;\n\n                        &:hover {\n                            color: #385f8a;\n                        }\n                    }\n                }\n                .title-info-other {\n                    font-size: 12px;\n                    float:left;\n                    margin: 4px 0 0 20px;\n\n                    a {\n                        margin: 0 5px;\n                    }\n                }\n            }\n            .reply-child-list {\n                margin-left: 32px;\n                border-left: 4px solid #c5c5c5;\n\n                .title-info {\n                    font-size: 12px;\n                    float:left;\n                    margin-top: 4px;\n\n                    .user-name {\n                        margin: 0 4px;\n                        color: #666;\n\n                        &:hover {\n                            color: #385f8a;\n                        }\n                    }\n                    .avatar {\n                        margin-right: 6px;\n                        border-radius: 20px;\n                        width: 26px;\n                        height: 26px;\n                        float: left;\n                    }\n                    .title-info-right {\n                        float: left;\n                        margin-top: 4px;\n\n                        .reply-time {\n                            padding: 0 20px;\n                        }\n                    }\n                }\n            }\n        }\n\n        .reply-hightlight {\n            background-color: #f4fcf0;\n        }\n\n        .reply-info {\n            display: flex;\n            flex-direction: column;\n\n            text {\n                margin-left: 20px;\n            }\n        }\n\n        .up-info {\n            flex-grow: 1;\n            justify-content: flex-end;\n            color: #808080;\n\n            image {\n                width: 50px;\n                height: 50px;\n            }\n\n            .up-count {\n                margin-left: 0;\n            }\n\n        }\n    }\n\n    .reply-content {\n        padding: 10px 20px 0 0;\n        font-size: 14px;\n    }\n\n    .pagin {\n        margin: 10px 15px;\n    }\n}\n\n",{"version":3,"sources":["article-detail.vue"],"names":[],"mappings":";AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"article-detail.vue","sourceRoot":"src/views/article/pc","sourcesContent":["<style scoped lang=\"scss\">\r\n    .article {\r\n        width: 100%;\r\n        background: #fff;\r\n        margin-bottom: 20px;\r\n    }\r\n\r\n    .title {\r\n        color: black;\r\n    }\r\n\r\n    .list-user-other {\r\n        margin: 10px 0px;\r\n        height: 24px;\r\n        line-height: 24px;\r\n    }\r\n\r\n    .list-user-other dt {\r\n        float: left;\r\n        margin: 0 6px 0 0;\r\n    }\r\n\r\n    .list-user-other dd {\r\n        float: left;\r\n        font-size: 14px;\r\n        color: #8a8a8a;\r\n        line-height: 24px;\r\n        margin-right: 10px;\r\n    }\r\n\r\n    .list-user-other .text {\r\n        margin-right: 4px;\r\n        color: #8a8a8a;\r\n    }\r\n\r\n    .list-user-other .num {\r\n        color: #3399ea;\r\n    }\r\n\r\n    .content {\r\n        overflow: hidden;\r\n    }\r\n    .content img{\r\n        max-width: 100%;\r\n    }\r\n\r\n    .comment-section {\r\n        flex-direction: column;\r\n        margin-top: 5px;\r\n        background-color: #fff;\r\n        overflow: hidden;\r\n\r\n        ul {\r\n            list-style: none;\r\n        }\r\n\r\n        image {\r\n            margin-right: 10px;\r\n            border-radius: 6px;\r\n\r\n        }\r\n\r\n        .avatar {\r\n            margin-right: 6px;\r\n            border-radius: 20px;\r\n            width: 26px;\r\n            height: 26px;\r\n        }\r\n\r\n        .reply-count {\r\n            padding: 12px 15px;\r\n            background-color: #eee;\r\n        }\r\n\r\n        .reply-list {\r\n            display: flex;\r\n            flex-direction: column;\r\n\r\n            .reply-item {\r\n                display: flex;\r\n                padding: 12px 15px;\r\n                border-bottom: 1px solid #f0f0f0;\r\n                flex-direction: column;\r\n\r\n                .user {\r\n                    flex: 0 0 26px;\r\n\r\n                    .avatar {\r\n                        margin-right: 6px;\r\n                        border-radius: 20px;\r\n                        width: 26px;\r\n                        height: 26px;\r\n                        float: left;\r\n                    }\r\n                    .title-info {\r\n                        font-size: 12px;\r\n                        float:left;\r\n                        margin-top: 4px;\r\n\r\n                        .user-name {\r\n                            margin: 0 4px;\r\n                            color: #666;\r\n\r\n                            &:hover {\r\n                                color: #385f8a;\r\n                            }\r\n                        }\r\n                    }\r\n                    .title-info-other {\r\n                        font-size: 12px;\r\n                        float:left;\r\n                        margin: 4px 0 0 20px;\r\n\r\n                        a {\r\n                            margin: 0 5px;\r\n                        }\r\n                    }\r\n                }\r\n                .reply-child-list {\r\n                    margin-left: 32px;\r\n                    border-left: 4px solid #c5c5c5;\r\n\r\n                    .title-info {\r\n                        font-size: 12px;\r\n                        float:left;\r\n                        margin-top: 4px;\r\n\r\n                        .user-name {\r\n                            margin: 0 4px;\r\n                            color: #666;\r\n\r\n                            &:hover {\r\n                                color: #385f8a;\r\n                            }\r\n                        }\r\n                        .avatar {\r\n                            margin-right: 6px;\r\n                            border-radius: 20px;\r\n                            width: 26px;\r\n                            height: 26px;\r\n                            float: left;\r\n                        }\r\n                        .title-info-right {\r\n                            float: left;\r\n                            margin-top: 4px;\r\n\r\n                            .reply-time {\r\n                                padding: 0 20px;\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n\r\n            .reply-hightlight {\r\n                background-color: #f4fcf0;\r\n            }\r\n\r\n            .reply-info {\r\n                display: flex;\r\n                flex-direction: column;\r\n\r\n                text {\r\n                    margin-left: 20px;\r\n                }\r\n            }\r\n\r\n            .up-info {\r\n                flex-grow: 1;\r\n                justify-content: flex-end;\r\n                color: #808080;\r\n\r\n                image {\r\n                    width: 50px;\r\n                    height: 50px;\r\n                }\r\n\r\n                .up-count {\r\n                    margin-left: 0;\r\n                }\r\n\r\n            }\r\n        }\r\n\r\n        .reply-content {\r\n            padding: 10px 20px 0 0;\r\n            font-size: 14px;\r\n        }\r\n\r\n        .pagin {\r\n            margin: 10px 15px;\r\n        }\r\n    }\r\n\r\n</style>\r\n<template>\r\n    <div id=\"mywork\">\r\n        <div class=\"page-header-main\">\r\n            <div class=\"width-80 margin-auto margin-top-2 flex-direction-column flex-justify-center flex-items-center\">\r\n                <div class=\"article\">\r\n                    <div class=\"ql-container ql-snow\">\r\n                        <div class=\"ql-editor\">\r\n                            <div class=\"title line-height-40 font-size-22\">{{article.title}}</div>\r\n                            <dl class=\"list-user-other\">\r\n                                <dt>\r\n                                    <a :href=\"$store.state.userUrlPre+article.userid\" target=\"_blank\">\r\n                                        <img :src=\"article.userHeadImg\"\r\n                                             style=\"width: 25px;height: 25px;border-radius: 100%;\">\r\n                                    </a>\r\n                                </dt>\r\n                                <dd>\r\n                                    <a :href=\"$store.state.userUrlPre+article.userid\" target=\"_blank\">{{article.userName}}</a>\r\n                                </dd>\r\n                                <dd>\r\n                                    <span class=\"text\">阅读数:</span>\r\n                                    <span class=\"num\">{{article.clickRate}}</span>\r\n                                </dd>\r\n                                <dd>{{article.createTime}}</dd>\r\n                            </dl>\r\n                            <div class=\"box-flex width-100 margin-auto margin-top-1 margin-bottom-1 border-top border-color-bfbfbf\"></div>\r\n                            <div class=\"content\" v-html=\"article.content\"></div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                <div class=\"comment-append-section\" id=\"commentAppendArea\">\r\n                    <!-- <Input v-model=\"commentAppend\" v-show=\"!appendActive\" @on-focus=\"toggleInput\"\r\n                            prefix=\"ios-create\" placeholder=\"添加评论\" />\r\n\r\n                    <Input v-show=\"appendActive\" v-model=\"commentAppend\"\r\n                           @on-blur=\"toggleInput\" ref=\"commentInputDom\"\r\n                           type=\"textarea\" :autosize=\"{minRows: 3,maxRows: 10}\" placeholder=\"添加评论\" /> -->\r\n                    <Input v-model=\"commentAppend\" @on-blur=\"toggleInput\" @on-focus=\"focusInput\" ref=\"commentInputDom\" type=\"textarea\" :rows=\"commentAppendInput\" placeholder=\"添加评论\" />\r\n\r\n                    <Button style=\"margin-top: 10px\" type=\"primary\" @click=\"publishComment()\">发表评论</Button>\r\n                </div>\r\n\r\n                <div class=\"comment-section\">\r\n                    <!-- <div class=\"reply-count\">\r\n                        {{total}}条回复\r\n                    </div> -->\r\n\r\n                    <ul class=\"reply-list\">\r\n                        <li v-for=\"(comment, index) in comments\" class=\"reply-item\" :key=\"comment.id\">\r\n                                <div class=\"user\">\r\n                                    <a :href=\"$store.state.userUrlPre+comment.userid\" target=\"_blank\">\r\n                                        <img class=\"avatar\" :src=\"comment.userHeadImg\" :title=\"comment.userName\" />\r\n                                    </a>\r\n                                    <div class=\"title-info\">\r\n                                        <a :href=\"$store.state.userUrlPre+comment.userid\" target=\"_blank\">\r\n                                            <span class=\"user-name\">{{comment.userName}}</span>\r\n                                        </a>\r\n                                        <span># {{index + 1}} 楼 • {{comment.creatTimeBy}}</span>\r\n                                    </div>\r\n                                    <div class=\"title-info-other\">\r\n                                        <span>\r\n                                            <a v-show=\"!comment.showContent\" @click=\"changeContent(index)\">查看回复({{comment.childCommentsCount}})</a>\r\n                                            <a v-show=\"comment.showContent\" @click=\"changeContent(index)\">收起回复</a>\r\n                                            <a @click=\"writeComment(comment,1)\">回复</a>\r\n                                        </span>\r\n                                    </div>\r\n                                </div>\r\n                                <div class=\"reply-info\">\r\n                                    <div class=\"reply-content\">\r\n                                        {{comment.comment}}\r\n                                    </div>\r\n                                </div>\r\n                            <ul v-show=\"comment.showContent\" class=\"reply-child-list\">\r\n                                <li v-for=\"(replyComment,replyIndex) in comment.childComments\" class=\"reply-item\" :key=\"replyComment.id\">\r\n                                    <div class=\"reply-info\">\r\n                                        <div class=\"title-info\">\r\n                                            <a :href=\"$store.state.userUrlPre+replyComment.userid\" target=\"_blank\">\r\n                                                <img class=\"avatar\" :src=\"replyComment.userHeadImg\" :title=\"replyComment.userName\" />\r\n                                            </a>\r\n                                            <div class=\"title-info-right\">\r\n                                                <a :href=\"$store.state.userUrlPre+replyComment.userid\" target=\"_blank\">\r\n                                                    <span class=\"user-name\">{{replyComment.userName}}</span>\r\n                                                </a>\r\n                                                <span>回复</span>\r\n                                                <span class=\"user-name\">{{replyComment.replierName}}:</span>\r\n                                                <span>{{replyComment.comment}}</span>\r\n                                                <span class=\"reply-time\">({{replyComment.creatTimeBy}})</span>\r\n                                                <a @click=\"writeComment(replyComment,2)\">回复</a>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </li>\r\n                            </ul>\r\n                        </li>\r\n                    </ul>\r\n\r\n                    <Page v-if=\"total > 10\" class=\"pagin\" :total=\"total\" size=\"small\" show-elevator @on-change=\"e=>{pageSearch(e)}\" />\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n<script>\r\n    export default {\r\n        data() {\r\n            return {\r\n                articleId: null,\r\n                article: {\r\n                    id: \"\",\r\n                    title: \"\",\r\n                    content: \"\",\r\n                    clickRate: \"\",\r\n                    commentCount: \"\",\r\n                    createTime: \"\",\r\n                    userid: \"\",\r\n                    userName: \"\",\r\n                    userHeadImg: \"\",\r\n                    githuburl: \"\"\r\n                },\r\n                comments: [],\r\n                page: 0,\r\n                pageSize: 10,\r\n                total: 0,\r\n                commentAppend: '',\r\n                commentAppendInput:1,\r\n                appendActive: false,\r\n                articleComment: {\r\n                    articleid: null,\r\n                    articleOwnerId:null,\r\n                    parentid: null,\r\n                    comment: null,\r\n                    replierId: null,\r\n                    replierName: null\r\n                }\r\n            };\r\n        },\r\n        mounted() {\r\n            this.articleId = this.$route.params.id;\r\n            this.getArticle(this.$route.params.id);\r\n            this.getComments();\r\n        },\r\n        methods: {\r\n            getArticle(e) {\r\n                this.axios({\r\n                    method: \"get\",\r\n                    url: \"/public/articles/article/\" + e\r\n                }).then(\r\n                    function (response) {\r\n                        this.articleSet(response.data.data);\r\n                    }.bind(this)\r\n                ).catch(\r\n                    function (error) {\r\n\r\n                    }.bind(this)\r\n                );\r\n            },\r\n            articleSet(e) {\r\n                this.article.id = e.id;\r\n                this.article.title = e.title;\r\n                this.article.content = e.content;\r\n                this.article.clickRate = e.clickRate;\r\n                this.article.commentCount = e.commentCount;\r\n                this.article.createTime = this.dateGet(e.createTime);\r\n                this.article.userid = e.userid;\r\n                this.article.userName = e.userName;\r\n                this.article.userHeadImg = e.userHeadImg;\r\n                this.article.githuburl = e.githuburl;\r\n            },\r\n            articleCommentSet(e) {\r\n                this.articleComment.articleid = e.articleid;\r\n                this.articleComment.parentid = e.parentid;\r\n                this.articleComment.comment = e.comment;\r\n                this.articleComment.replierId = e.replierId;\r\n                this.articleComment.replierName = e.replierName;\r\n                this.articleComment.articleOwnerId = this.article.userid;\r\n            },\r\n            articleCommentInit() {\r\n                this.articleComment.articleid = null;\r\n                this.articleComment.parentid = null;\r\n                this.articleComment.comment = null;\r\n                this.articleComment.replierId = null;\r\n                this.articleComment.replierName = null;\r\n                this.articleComment.articleOwnerId = null;\r\n            },\r\n            getComments() {\r\n                this.axios({\r\n                    method: 'get',\r\n                    url: '/public/article/comment',\r\n                    params: {\r\n                        articleId: this.articleId,\r\n                        page: this.page,\r\n                        pageSize: this.pageSize\r\n                    },\r\n                }).then(\r\n                    function (response) {\r\n                        let data = response.data.data;\r\n                        for (let comment of data.data) {\r\n                            comment.creatTimeBy = this.latestTimeFormat(comment.createTime)\r\n                            comment.showContent = false;\r\n                            for (let replyComment of comment.childComments) {\r\n                                replyComment.creatTimeBy = this.latestTimeFormat(replyComment.createTime);\r\n                            }\r\n                        }\r\n                        this.comments = data.data;\r\n                        this.total = data.totalCount;\r\n                    }.bind(this)\r\n                ).catch(function (error) {\r\n\r\n                    }.bind(this)\r\n                );\r\n            },\r\n            focusInput(event){\r\n                this.commentAppendInput = 3;\r\n            },\r\n            writeComment(e,sign){\r\n                this.commentAppendInput = 3;\r\n\r\n                var anchor = this.$el.querySelector(\"#commentAppendArea\")\r\n                document.body.scrollTop = anchor.offsetTop; // chrome\r\n                this.appendActive = true;\r\n                //document.documentElement.scrollTop = anchor.offsetTop; // firefox\r\n\r\n                if(sign == 1){\r\n                    this.articleComment.articleid = this.articleId;\r\n                    this.articleComment.parentid = e.id;\r\n                    this.articleComment.comment = null;\r\n                    this.articleComment.replierId = e.userid;\r\n                    this.articleComment.replierName = e.userName;\r\n                }else if(sign == 2){\r\n                    this.articleComment.articleid = this.articleId;\r\n                    this.articleComment.parentid = e.parentid;\r\n                    this.articleComment.comment = null;\r\n                    this.articleComment.replierId = e.userid;\r\n                    this.articleComment.replierName = e.userName;\r\n                }\r\n                this.commentAppend = \"[reply]\"+e.userName+\"[/reply]\\n\";\r\n            },\r\n            publishComment() {\r\n                if (this.axios.defaults.headers.common[\"Authorization\"] == null ||this.axios.defaults.headers.common[\"Authorization\"] == \"\"){\r\n                    this.$Message.error('请登录');\r\n                    return;\r\n                }\r\n                if(this.commentAppend == null || this.commentAppend == ''){\r\n                    this.$Message.error('请输入评论');\r\n                    return;\r\n                }\r\n\r\n                if(this.articleComment.replierName != null){\r\n                    var str = this.commentAppend.substring(0,15+this.articleComment.replierName.length);\r\n                    var validate = \"[reply]\"+this.articleComment.replierName+\"[/reply]\";\r\n                    if(str == validate){\r\n                        this.articleComment.comment = this.commentAppend.substring(str.length);\r\n                        this.articleComment.articleOwnerId = this.article.userid;\r\n                        this.postComment(this.articleComment);\r\n                    }else {\r\n                        this.postComment({\r\n                        articleid:this.articleId,\r\n                        comment:this.commentAppend,\r\n                        articleOwnerId:this.article.userid});\r\n                    }\r\n                }else {\r\n                    this.postComment({\r\n                        articleid:this.articleId,\r\n                        comment:this.commentAppend,\r\n                        articleOwnerId:this.article.userid});\r\n                }\r\n            },\r\n            postComment(e){\r\n                this.axios({\r\n                    method: 'post',\r\n                    url: '/article/comment',\r\n                    data: e\r\n                }).then(function (response) {\r\n                    this.$Message.success('评论成功');\r\n                    this.getComments();\r\n                    this.articleCommentInit();\r\n                    this.commentAppend = null;\r\n                }.bind(this)).catch(function () {\r\n                    this.$Message.error('评论失败，请稍后重试！');\r\n                }.bind(this));\r\n            },\r\n            changeContent(index){\r\n                var temp = this.comments[index];\r\n                temp.showContent = ! temp.showContent;\r\n                this.comments.splice(index,1,temp);\r\n            },\r\n            pageSearch(e) {\r\n              this.page = e - 1;\r\n              this.getComments();\r\n            }\r\n        }\r\n    };\r\n</script>\r\n"]}]}