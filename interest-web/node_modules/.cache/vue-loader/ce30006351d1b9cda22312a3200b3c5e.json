{"remainingRequest":"E:\\workspace\\javaEE\\interest\\interest-web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\workspace\\javaEE\\interest\\interest-web\\src\\views\\sys\\user.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\workspace\\javaEE\\interest\\interest-web\\src\\views\\sys\\user.vue","mtime":1574843329944},{"path":"E:\\workspace\\javaEE\\interest\\interest-web\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\workspace\\javaEE\\interest\\interest-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\workspace\\javaEE\\interest\\interest-web\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nexport default {\n\tdata() {\n\t\treturn {\n\t\t\t/*用于查找的登录名*/\n\t\t\tname: null,\n\t\t\t/*选择的数量*/\n\t\t\tcount: null,\n\t\t\t/*选中的组数据*/\n\t\t\tgroupId: null,\n\t\t\t/*新建modal的显示参数*/\n\t\t\tnewModal: false,\n\t\t\t/*修改modal的显示参数*/\n\t\t\tmodifyModal: false,\n\t\t\t/*角色配置modal的显示参数*/\n\t\t\troleModal: false,\n\t\t\t/*分页total属性绑定值*/\n\t\t\ttotal: 0,\n\t\t\t/*loading*/\n\t\t\tloading: true,\n\t\t\t/*pageInfo实体*/\n\t\t\tpageInfo: {\n\t\t\t\tpage: 0,\n\t\t\t\tpageSize: 10\n\t\t\t},\n\t\t\t/*user实体*/\n\t\t\tuser: {\n\t\t\t\tid: null,\n\t\t\t\tname: null,\n\t\t\t\tloginName: null,\n\t\t\t\tpassword: null,\n\t\t\t\tpasswordAgain: null,\n\t\t\t\temail: null\n\t\t\t},\n\t\t\t/*用于添加的user实体*/\n\t\t\tuserNew: {\n\t\t\t\tid: null,\n\t\t\t\tname: null,\n\t\t\t\tloginName: null,\n\t\t\t\tpassword: null,\n\t\t\t\tpasswordAgain: null,\n\t\t\t\temail: null,\n\t\t\t\tusertype: 0 // 设置默认选中\n\t\t\t},\n\t\t\t/*用于修改的user实体*/\n\t\t\tuserModify: {\n\t\t\t\tid: null,\n\t\t\t\tname: null,\n\t\t\t\tusertype: null\n\t\t\t},\n\t\t\t/*新建验证*/\n\t\t\truleNew: {\n\t\t\t\tname: [{\n\t\t\t\t\ttype: \"string\",\n\t\t\t\t\trequired: true,\n\t\t\t\t\tmessage: \"输入用户名\",\n\t\t\t\t\ttrigger: \"blur\"\n\t\t\t\t}],\n\t\t\t\tloginName: [{\n\t\t\t\t\ttype: \"string\",\n\t\t\t\t\trequired: true,\n\t\t\t\t\tmessage: \"输入登录名\",\n\t\t\t\t\ttrigger: \"blur\"\n\t\t\t\t}],\n\t\t\t\tpassword: [{\n\t\t\t\t\ttype: \"string\",\n\t\t\t\t\trequired: true,\n\t\t\t\t\tmessage: \"输入密码\",\n\t\t\t\t\ttrigger: \"blur\"\n\t\t\t\t}],\n\t\t\t\tpasswordAgain: [{\n\t\t\t\t\ttype: \"string\",\n\t\t\t\t\trequired: true,\n\t\t\t\t\tmessage: \"输入再次密码\",\n\t\t\t\t\ttrigger: \"blur\"\n\t\t\t\t}],\n\t\t\t\temail: [{\n\t\t\t\t\t\trequired: true,\n\t\t\t\t\t\tmessage: \"输入邮箱\",\n\t\t\t\t\t\ttrigger: \"blur\"\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\ttype: \"email\",\n\t\t\t\t\t\tmessage: \"输入正确的邮箱格式\",\n\t\t\t\t\t\ttrigger: \"blur\"\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t},\n\t\t\t/*修改验证*/\n\t\t\truleModify: {\n\t\t\t\tname: [{\n\t\t\t\t\ttype: \"string\",\n\t\t\t\t\trequired: true,\n\t\t\t\t\tmessage: \"输入用户名\",\n\t\t\t\t\ttrigger: \"blur\"\n\t\t\t\t}],\n\t\t\t\tpassword: [{\n\t\t\t\t\ttype: \"string\",\n\t\t\t\t\trequired: true,\n\t\t\t\t\tmessage: \"输入密码\",\n\t\t\t\t\ttrigger: \"blur\"\n\t\t\t\t}],\n\t\t\t\temail: [{\n\t\t\t\t\t\trequired: true,\n\t\t\t\t\t\tmessage: \"输入邮箱\",\n\t\t\t\t\t\ttrigger: \"blur\"\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\ttype: \"email\",\n\t\t\t\t\t\tmessage: \"输入正确的邮箱格式\",\n\t\t\t\t\t\ttrigger: \"blur\"\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t},\n\t\t\t/*表显示字段*/\n\t\t\tcolumns1: [{\n\t\t\t\t\ttype: \"selection\",\n\t\t\t\t\twidth: 60,\n\t\t\t\t\talign: \"center\"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"用户名\",\n\t\t\t\t\tkey: \"name\"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"邮箱\",\n\t\t\t\t\tkey: \"email\"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"用户类型\",\n\t\t\t\t\talign: \"center\",\n\t\t\t\t\tkey: \"usertype\",\n\t\t\t\t\trender: (h, params) => {\n\t\t\t\t\t\tif (params.row.usertype == 0) {\n\t\t\t\t\t\t\treturn h(\"div\", [h(\"strong\", null, \"普通用户\")]);\n\t\t\t\t\t\t} else if (params.row.usertype == 1) {\n\t\t\t\t\t\t\treturn h(\"div\", [h(\"strong\", null, \"管理员\")]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"注册时间\",\n\t\t\t\t\talign: \"center\",\n\t\t\t\t\tkey: \"createTime\"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"操作\",\n\t\t\t\t\talign: \"center\",\n\t\t\t\t\tkey: \"action\",\n\t\t\t\t\trender: (h, params) => {\n\t\t\t\t\t\treturn h(\"div\", [\n\t\t\t\t\t\t\th(\n\t\t\t\t\t\t\t\t\"Button\", {\n\t\t\t\t\t\t\t\t\tprops: {\n\t\t\t\t\t\t\t\t\t\ttype: \"info\"\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\ton: {\n\t\t\t\t\t\t\t\t\t\tclick: () => {\n\t\t\t\t\t\t\t\t\t\t\tthis.relationSet(params.row);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\"配置角色\"\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t],\n\t\t\t/*表数据*/\n\t\t\tdata1: [],\n\t\t\t/*表显示字段*/\n\t\t\tcolumns2: [{\n\t\t\t\t\ttype: \"selection\",\n\t\t\t\t\twidth: 60,\n\t\t\t\t\talign: \"center\"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"角色名称\",\n\t\t\t\t\twidth: 120,\n\t\t\t\t\tkey: \"name\"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: \"描述\",\n\t\t\t\t\tkey: \"describe\"\n\t\t\t\t}\n\t\t\t],\n\t\t\t/*表数据*/\n\t\t\tdata2: [],\n\t\t\t/*data2的临时存储*/\n\t\t\tdata2Temp: [],\n\t\t\t/*用户与角色关系列表*/\n\t\t\trelationList: null\n\t\t};\n\t},\n\tmounted() {\n\t\t/*页面初始化调用方法*/\n\t\tthis.getTable({\n\t\t\tpageInfo: this.pageInfo,\n\t\t\tname: this.name\n\t\t});\n\t\tthis.axios({\n\t\t\t\tmethod: \"get\",\n\t\t\t\turl: \"/roles/all\"\n\t\t\t})\n\t\t\t.then(\n\t\t\t\tfunction(response) {\n\t\t\t\t\tthis.data2Temp = response.data.data;\n\t\t\t\t}.bind(this)\n\t\t\t)\n\t\t\t.catch(function(error) {\n\t\t\t\talert(error);\n\t\t\t});\n\t},\n\tmethods: {\n\t\t/*pageInfo实体初始化*/\n\t\tinitPageInfo() {\n\t\t\tthis.pageInfo.page = 0;\n\t\t\tthis.pageInfo.pageSize = 10;\n\t\t},\n\t\t/*user实体初始化*/\n\t\tinitUser() {\n\t\t\tthis.user.id = null;\n\t\t\tthis.user.name = null;\n\t\t\tthis.user.loginName = null;\n\t\t\tthis.user.password = null;\n\t\t\tthis.user.email = null;\n\t\t},\n\t\t/*userNew实体初始化*/\n\t\tinitUserNew() {\n\t\t\tthis.userNew.id = null;\n\t\t\tthis.userNew.name = null;\n\t\t\tthis.userNew.loginName = null;\n\t\t\tthis.userNew.password = null;\n\t\t\tthis.userNew.passwordAgain = null;\n\t\t\tthis.userNew.email = null;\n\t\t},\n\t\t/*userModify实体初始化*/\n\t\tinitUserModify() {\n\t\t\tthis.userModify.id = null;\n\t\t\tthis.userModify.name = null;\n\t\t\tthis.userModify.loginName = null;\n\t\t\tthis.userModify.password = null;\n\t\t\tthis.userModify.email = null;\n\t\t},\n\t\t/*userNew设置*/\n\t\tuserSet(e) {\n\t\t\tthis.user.id = e.id;\n\t\t\tthis.user.name = e.name;\n\t\t\tthis.user.loginName = e.loginName;\n\t\t\tthis.user.password = e.password;\n\t\t\tthis.user.email = e.email;\n\t\t\tthis.user.usertype = e.usertype;\n\t\t\tthis.user.createTime = e.createTime;\n\t\t},\n\t\t/*userNew设置*/\n\t\tuserNewSet(e) {\n\t\t\tthis.userNew.id = e.id;\n\t\t\tthis.userNew.name = e.name;\n\t\t\tthis.userNew.loginName = e.loginName;\n\t\t\tthis.userNew.password = e.password;\n\t\t\tthis.userNew.passwordAgain = e.password;\n\t\t\tthis.userNew.email = e.email;\n\t\t},\n\t\t/*userModify设置*/\n\t\tuserModifySet(e) {\n\t\t\tthis.userModify.id = e.id;\n\t\t\tthis.userModify.name = e.name;\n\t\t\tthis.userModify.usertype = e.usertype;\n\t\t},\n\t\tdateGet(e) {\n\t\t\tvar time = new Date(parseInt(e));\n\t\t\treturn (\n\t\t\t\ttime.getFullYear() +\n\t\t\t\t\"-\" +\n\t\t\t\t(time.getMonth() + 1) +\n\t\t\t\t\"-\" +\n\t\t\t\ttime.getDate() +\n\t\t\t\t\" \" +\n\t\t\t\ttime.getHours() +\n\t\t\t\t\":\" +\n\t\t\t\ttime.getMinutes()\n\t\t\t);\n\t\t},\n\t\tlistDateSet(e) {\n\t\t\tfor (var i = e.length - 1; i >= 0; i--) {\n\t\t\t\te[i].createTime = this.dateGet(e[i].createTime);\n\t\t\t}\n\t\t},\n\t\t/*得到表数据*/\n\t\tgetTable(e) {\n\t\t\tthis.axios({\n\t\t\t\t\tmethod: \"get\",\n\t\t\t\t\turl: \"/users\",\n\t\t\t\t\tparams: {\n\t\t\t\t\t\tpage: e.pageInfo.page,\n\t\t\t\t\t\tpageSize: e.pageInfo.pageSize,\n\t\t\t\t\t\tname: e.name\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.then(\n\t\t\t\t\tfunction(response) {\n\t\t\t\t\t\tthis.data1 = response.data.data.data;\n\t\t\t\t\t\tthis.listDateSet(this.data1);\n\t\t\t\t\t\tthis.total = response.data.data.totalCount;\n\t\t\t\t\t}.bind(this)\n\t\t\t\t)\n\t\t\t\t.catch(function(error) {\n\t\t\t\t\tconsole.log(error);\n\t\t\t\t});\n\t\t},\n\t\t/*搜索按钮点击事件*/\n\t\tsearch() {\n\t\t\tthis.initPageInfo();\n\t\t\tthis.getTable({\n\t\t\t\tpageInfo: this.pageInfo,\n\t\t\t\tname: this.name\n\t\t\t});\n\t\t},\n\t\t/*分页点击事件*/\n\t\tpageSearch(e) {\n\t\t\tthis.pageInfo.page = e - 1;\n\t\t\tthis.getTable({\n\t\t\t\tpageInfo: this.pageInfo,\n\t\t\t\tname: this.name\n\t\t\t});\n\t\t},\n\t\t/*新建点击触发事件*/\n\t\topenNewModal() {\n\t\t\tthis.newModal = true;\n\t\t\tthis.initUserNew();\n\t\t\tthis.data1.sort();\n\t\t\tthis.count = 0;\n\t\t\tthis.groupId = null;\n\t\t},\n\t\t/*新建modal的newOk点击事件*/\n\t\tnewOk() {\n\t\t\tif (this.userNew.name == \"\" || this.userNew.name == null) {\n\t\t\t\tthis.$Message.warning(\"请输入用户名\");\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (this.userNew.password == \"\" || this.userNew.password == null) {\n\t\t\t\tthis.$Message.warning(\"请输入密码\");\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.userNew.loginName = this.userNew.name;\n\t\t\tthis.userNew.createTime = new Date().getTime();\n\n\t\t\tconsole.log(\"=====\" + JSON.stringify(this.userNew))\n\n\t\t\tthis.userSet(this.userNew);\n\t\t\tthis.axios({\n\t\t\t\t\tmethod: \"post\",\n\t\t\t\t\turl: \"/users/user\",\n\t\t\t\t\tdata: this.user\n\t\t\t\t})\n\t\t\t\t.then(\n\t\t\t\t\tfunction(response) {\n\t\t\t\t\t\tconsole.log(JSON.stringify(response))\n\t\t\t\t\t\tif (response.data.status == '2000') {\n\t\t\t\t\t\t\tthis.initUserNew();\n\t\t\t\t\t\t\tthis.getTable({\n\t\t\t\t\t\t\t\tpageInfo: this.pageInfo,\n\t\t\t\t\t\t\t\tname: this.name\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tthis.newModal = false;\n\t\t\t\t\t\t\tthis.$Message.info(\"新建成功\");\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.$Modal.error({\n\t\t\t\t\t\t\t\ttitle: '提示',\n\t\t\t\t\t\t\t\tcontent: \"创建用户失败\"\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}.bind(this)\n\t\t\t\t)\n\t\t\t\t.catch(function(error) {\n\t\t\t\t\talert(error);\n\t\t\t\t});\n\n\t\t},\n\t\t/*点击修改时判断是否只选择一个*/\n\t\topenModifyModal() {\n\t\t\tif (this.count > 1 || this.count < 1) {\n\t\t\t\tthis.modifyModal = false;\n\t\t\t\tthis.$Message.warning(\"请至少选择一项(且只能选择一项)\");\n\t\t\t} else {\n\t\t\t\tthis.modifyModal = true;\n\t\t\t}\n\t\t},\n\t\t/*修改modal的modifyOk点击事件*/\n\t\tmodifyOk() {\n\t\t\t// this.initUser();\n\t\t\t// this.userSet(this.userModify);\n\t\t\tthis.axios({\n\t\t\t\t\tmethod: \"put\",\n\t\t\t\t\turl: \"/users/user\",\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tname: this.userModify.name,\n\t\t\t\t\t\tusertype: this.userModify.usertype,\n\t\t\t\t\t\tid: this.userModify.id\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.then(\n\t\t\t\t\tfunction(response) {\n\t\t\t\t\t\tthis.initUserNew();\n\t\t\t\t\t\tthis.getTable({\n\t\t\t\t\t\t\tpageInfo: this.pageInfo,\n\t\t\t\t\t\t\tname: this.name\n\t\t\t\t\t\t});\n\t\t\t\t\t\tthis.$Message.info(\"修改成功\");\n\t\t\t\t\t}.bind(this)\n\t\t\t\t)\n\t\t\t\t.catch(function(error) {\n\t\t\t\t\talert(error);\n\t\t\t\t});\n\t\t\tthis.modifyModal = false;\n\t\t},\n\t\t/*modal的cancel点击事件*/\n\t\tcancel() {\n\t\t\tthis.newModal = false;\n\t\t\tthis.modifyModal = false;\n\t\t\t//this.$Message.info(\"点击了取消\");\n\t\t},\n\t\t/*table选择后触发事件*/\n\t\tchange(e) {\n\t\t\tif (e.length == 1) {\n\t\t\t\tthis.userModifySet(e[\"0\"]);\n\t\t\t}\n\t\t\tthis.setGroupId(e);\n\t\t},\n\t\t/*通过选中的行设置groupId的值*/\n\t\tsetGroupId(e) {\n\t\t\tthis.groupId = [];\n\t\t\tthis.count = e.length;\n\t\t\tfor (var i = 0; i <= e.length - 1; i++) {\n\t\t\t\tthis.groupId.push(e[i].id);\n\t\t\t}\n\t\t},\n\t\t/*删除table中选中的数据*/\n\t\tdel() {\n\t\t\tif (this.groupId != null && this.groupId != \"\") {\n\t\t\t\tthis.axios({\n\t\t\t\t\t\tmethod: \"delete\",\n\t\t\t\t\t\turl: \"/users\",\n\t\t\t\t\t\tdata: this.groupId\n\t\t\t\t\t})\n\t\t\t\t\t.then(\n\t\t\t\t\t\tfunction(response) {\n\t\t\t\t\t\t\tthis.getTable({\n\t\t\t\t\t\t\t\tpageInfo: this.pageInfo,\n\t\t\t\t\t\t\t\tname: this.name\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tthis.groupId = null;\n\t\t\t\t\t\t\tthis.count = 0;\n\t\t\t\t\t\t\tthis.$Message.info(\"删除成功\");\n\t\t\t\t\t\t}.bind(this)\n\t\t\t\t\t)\n\t\t\t\t\t.catch(function(error) {\n\t\t\t\t\t\talert(error);\n\t\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\t/*表格中双击事件*/\n\t\tdblclick(e) {\n\t\t\tthis.userModifySet(e);\n\t\t\tthis.modifyModal = true;\n\t\t\tthis.data1.sort();\n\t\t},\n\t\t/*流程配置*/\n\t\trelationSet(e) {\n\t\t\tthis.roleModal = true;\n\t\t\tthis.data2 = [];\n\t\t\tthis.axios({\n\t\t\t\t\tmethod: \"get\",\n\t\t\t\t\turl: \"/relations/\" + e.id\n\t\t\t\t})\n\t\t\t\t.then(\n\t\t\t\t\tfunction(response) {\n\t\t\t\t\t\tvar roleList = [];\n\t\t\t\t\t\tfor (var i in response.data.data) {\n\t\t\t\t\t\t\troleList.push(response.data.data[i].roleId);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tfor (var i in this.data2Temp) {\n\t\t\t\t\t\t\tif (roleList.indexOf(this.data2Temp[i].id) == -1) {\n\t\t\t\t\t\t\t\tthis.data2.push({\n\t\t\t\t\t\t\t\t\tid: this.data2Temp[i].id,\n\t\t\t\t\t\t\t\t\tname: this.data2Temp[i].name,\n\t\t\t\t\t\t\t\t\tdescribe: this.data2Temp[i].describe,\n\t\t\t\t\t\t\t\t\tuserId: e.id,\n\t\t\t\t\t\t\t\t\t_checked: false\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tthis.data2.push({\n\t\t\t\t\t\t\t\t\tid: this.data2Temp[i].id,\n\t\t\t\t\t\t\t\t\tname: this.data2Temp[i].name,\n\t\t\t\t\t\t\t\t\tdescribe: this.data2Temp[i].describe,\n\t\t\t\t\t\t\t\t\tuserId: e.id,\n\t\t\t\t\t\t\t\t\t_checked: true\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}.bind(this)\n\t\t\t\t)\n\t\t\t\t.catch(function(error) {\n\t\t\t\t\talert(error);\n\t\t\t\t});\n\t\t},\n\t\t/*配置角色modal确认按钮点击事件*/\n\t\troleOk() {\n\t\t\tif (this.relationList != null) {\n\t\t\t\tthis.axios({\n\t\t\t\t\t\tmethod: \"post\",\n\t\t\t\t\t\turl: \"/relations\",\n\t\t\t\t\t\tdata: this.relationList\n\t\t\t\t\t})\n\t\t\t\t\t.then(\n\t\t\t\t\t\tfunction(response) {\n\t\t\t\t\t\t\tthis.$Message.info(\"配置成功\");\n\t\t\t\t\t\t}.bind(this)\n\t\t\t\t\t)\n\t\t\t\t\t.catch(function(error) {\n\t\t\t\t\t\talert(error);\n\t\t\t\t\t});\n\t\t\t\tthis.relationList = null;\n\t\t\t}\n\t\t},\n\t\t/*配置角色modal中表选择改变事件*/\n\t\tchange2(e) {\n\t\t\tthis.relationList = [];\n\t\t\tif (e.length == 0) {\n\t\t\t\tthis.relationList.push({\n\t\t\t\t\tuserId: this.data2[0].userId\n\t\t\t\t});\n\t\t\t}\n\t\t\tfor (var i in e) {\n\t\t\t\tthis.relationList.push({\n\t\t\t\t\tuserId: e[i].userId,\n\t\t\t\t\troleId: e[i].id\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n};\n",{"version":3,"sources":["user.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"user.vue","sourceRoot":"src/views/sys","sourcesContent":["<style scoped>\r\n\t.operation-button{\r\n    margin-right: 3px;\r\n  }\r\n</style>\r\n<template>\r\n\t<div style=\"margin: 20px;\">\r\n\t\t<div>\r\n\t\t\t<Row style=\"margin-bottom: 25px;\">\r\n\t\t\t\t<Col span=\"8\">用户名：\r\n\t\t\t\t<Input v-model=\"name\" placeholder=\"请输入...\" style=\"width:200px\" />\r\n\t\t\t\t</Col>\r\n\t\t\t\t<Col span=\"8\"><Button type=\"primary\" shape=\"circle\" icon=\"ios-search\" @click=\"search()\">搜索</Button></Col>\r\n\t\t\t</Row>\r\n\t\t</div>\r\n\t\t<div>\r\n\t\t\t<ul style=\"list-style-type: none;\">\r\n\t\t\t\t<li>\r\n\t\t\t\t\t<Button class=\"operation-button\" type=\"success\" icon=\"md-build\" @click=\"openNewModal()\">新增</Button>\r\n\t\t\t\t\t<Button class=\"operation-button\" type=\"warning\" icon=\"md-build\" style=\"margin-left: 0.9375rem;\" @click=\"openModifyModal()\">修改</Button>\r\n\t\t\t\t\t<Button type=\"error\" icon=\"md-trash\" style=\"margin-left: 0.9375rem;\" @click=\"del()\">删除</Button>\r\n\t\t\t\t</li>\r\n\t\t\t\t<li>\r\n\t\t\t\t\t<div style=\"padding: 10px 0;\">\r\n\t\t\t\t\t\t<Table border :columns=\"columns1\" :data=\"data1\" :height=\"400\" @on-selection-change=\"s=>{change(s)}\"\r\n\t\t\t\t\t\t @on-row-dblclick=\"s=>{dblclick(s)}\"></Table>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</li>\r\n\t\t\t\t<li>\r\n\t\t\t\t\t<div style=\"text-align: right;\">\r\n\t\t\t\t\t\t<Page :total=\"total\" :page-size=\"pageInfo.pageSize\" show-elevator show-total @on-change=\"e=>{pageSearch(e)}\"></Page>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</li>\r\n\t\t\t</ul>\r\n\t\t</div>\r\n\r\n\t\t<!--新建modal-->\r\n\t\t<Modal :mask-closable=\"false\" :visible.sync=\"newModal\" v-model=\"newModal\" width=\"600\" title=\"新建\">\r\n\t\t\t<Form :label-width=\"80\">\r\n\t\t\t\t<Row>\r\n\t\t\t\t\t<Col span=\"12\">\r\n\t\t\t\t\t<Form-item label=\"用户名:\">\r\n\t\t\t\t\t\t<Input v-model.trim=\"userNew.name\" style=\"width: 204px\" />\r\n\t\t\t\t\t</Form-item>\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t</Row>\r\n\t\t\t\t<Row>\r\n\t\t\t\t\t<Col span=\"12\">\r\n\t\t\t\t\t<Form-item label=\"密码:\">\r\n\t\t\t\t\t\t<Input v-model.trim=\"userNew.password\" placeholder=\"请牢记密码\" style=\"width: 204px\" />\r\n\t\t\t\t\t</Form-item>\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t</Row>\r\n\t\t\t\t<Row>\r\n\t\t\t\t\t<Col span=\"12\">\r\n\t\t\t\t\t<Form-item label=\"邮箱:\">\r\n\t\t\t\t\t\t<Input v-model.trim=\"userNew.email\" type=\"email\" style=\"width: 204px\" />\r\n\t\t\t\t\t</Form-item>\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t</Row>\r\n\t\t\t\t<Row style=\"display: none;\">\r\n\t\t\t\t\t<Col span=\"12\">\r\n\t\t\t\t\t<Form-item label=\"用户类型:\">\r\n\t\t\t\t\t\t<Select v-model=\"userNew.usertype\" style=\"width:200px\">\r\n\t\t\t\t\t\t\t<Option :value=\"0\">普通用户</Option>\r\n\t\t\t\t\t\t\t<Option :value=\"1\">管理员</Option>\r\n\t\t\t\t\t\t</Select>\r\n\t\t\t\t\t</Form-item>\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t</Row>\r\n\t\t\t</Form>\r\n\r\n\t\t\t<div slot=\"footer\">\r\n\t\t\t\t<Button type=\"text\" size=\"large\" @click=\"cancel()\">取消</Button>\r\n\t\t\t\t<Button type=\"primary\" size=\"large\" @click=\"newOk()\">确定</Button>\r\n\t\t\t</div>\r\n\t\t</Modal>\r\n\r\n\t\t<!--修改modal-->\r\n\t\t<Modal :mask-closable=\"false\" :visible.sync=\"modifyModal\" v-model=\"modifyModal\" width=\"600\" title=\"修改\" @on-ok=\"modifyOk()\"\r\n\t\t @on-cancel=\"cancel()\">\r\n\t\t\t<Form :label-width=\"80\">\r\n\t\t\t\t<Row>\r\n\t\t\t\t\t<Col span=\"12\">\r\n\t\t\t\t\t<Form-item label=\"登录名:\">\r\n\t\t\t\t\t\t<Input v-model=\"userModify.name\" style=\"width: 204px\" disabled=\"disabled\" />\r\n\t\t\t\t\t</Form-item>\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t</Row>\r\n\t\t\t\t<Row>\r\n\t\t\t\t\t<Col span=\"12\">\r\n\t\t\t\t\t<Form-item label=\"用户类型:\">\r\n\t\t\t\t\t\t<Select v-model=\"userModify.usertype\" style=\"width:200px\">\r\n\t\t\t\t\t\t\t<Option :value=\"0\">普通用户</Option>\r\n\t\t\t\t\t\t\t<Option :value=\"1\">管理员</Option>\r\n\t\t\t\t\t\t</Select>\r\n\t\t\t\t\t\t<!-- <Input v-model=\"userModify.email\" style=\"width: 204px\"/> -->\r\n\t\t\t\t\t</Form-item>\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t</Row>\r\n\t\t\t</Form>\r\n\t\t</Modal>\r\n\t\t<!--配置角色modal-->\r\n\t\t<Modal v-model=\"roleModal\" width=\"500\" title=\"角色配置\" @on-ok=\"roleOk()\" @on-cancel=\"cancel()\">\r\n\t\t\t<div>\r\n\t\t\t\t<Table border :columns=\"columns2\" :data=\"data2\" :height=\"260\" @on-selection-change=\"s=>{change2(s)}\"></Table>\r\n\t\t\t</div>\r\n\t\t</Modal>\r\n\t</div>\r\n</template>\r\n<script>\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\t/*用于查找的登录名*/\r\n\t\t\t\tname: null,\r\n\t\t\t\t/*选择的数量*/\r\n\t\t\t\tcount: null,\r\n\t\t\t\t/*选中的组数据*/\r\n\t\t\t\tgroupId: null,\r\n\t\t\t\t/*新建modal的显示参数*/\r\n\t\t\t\tnewModal: false,\r\n\t\t\t\t/*修改modal的显示参数*/\r\n\t\t\t\tmodifyModal: false,\r\n\t\t\t\t/*角色配置modal的显示参数*/\r\n\t\t\t\troleModal: false,\r\n\t\t\t\t/*分页total属性绑定值*/\r\n\t\t\t\ttotal: 0,\r\n\t\t\t\t/*loading*/\r\n\t\t\t\tloading: true,\r\n\t\t\t\t/*pageInfo实体*/\r\n\t\t\t\tpageInfo: {\r\n\t\t\t\t\tpage: 0,\r\n\t\t\t\t\tpageSize: 10\r\n\t\t\t\t},\r\n\t\t\t\t/*user实体*/\r\n\t\t\t\tuser: {\r\n\t\t\t\t\tid: null,\r\n\t\t\t\t\tname: null,\r\n\t\t\t\t\tloginName: null,\r\n\t\t\t\t\tpassword: null,\r\n\t\t\t\t\tpasswordAgain: null,\r\n\t\t\t\t\temail: null\r\n\t\t\t\t},\r\n\t\t\t\t/*用于添加的user实体*/\r\n\t\t\t\tuserNew: {\r\n\t\t\t\t\tid: null,\r\n\t\t\t\t\tname: null,\r\n\t\t\t\t\tloginName: null,\r\n\t\t\t\t\tpassword: null,\r\n\t\t\t\t\tpasswordAgain: null,\r\n\t\t\t\t\temail: null,\r\n\t\t\t\t\tusertype: 0 // 设置默认选中\r\n\t\t\t\t},\r\n\t\t\t\t/*用于修改的user实体*/\r\n\t\t\t\tuserModify: {\r\n\t\t\t\t\tid: null,\r\n\t\t\t\t\tname: null,\r\n\t\t\t\t\tusertype: null\r\n\t\t\t\t},\r\n\t\t\t\t/*新建验证*/\r\n\t\t\t\truleNew: {\r\n\t\t\t\t\tname: [{\r\n\t\t\t\t\t\ttype: \"string\",\r\n\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\tmessage: \"输入用户名\",\r\n\t\t\t\t\t\ttrigger: \"blur\"\r\n\t\t\t\t\t}],\r\n\t\t\t\t\tloginName: [{\r\n\t\t\t\t\t\ttype: \"string\",\r\n\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\tmessage: \"输入登录名\",\r\n\t\t\t\t\t\ttrigger: \"blur\"\r\n\t\t\t\t\t}],\r\n\t\t\t\t\tpassword: [{\r\n\t\t\t\t\t\ttype: \"string\",\r\n\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\tmessage: \"输入密码\",\r\n\t\t\t\t\t\ttrigger: \"blur\"\r\n\t\t\t\t\t}],\r\n\t\t\t\t\tpasswordAgain: [{\r\n\t\t\t\t\t\ttype: \"string\",\r\n\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\tmessage: \"输入再次密码\",\r\n\t\t\t\t\t\ttrigger: \"blur\"\r\n\t\t\t\t\t}],\r\n\t\t\t\t\temail: [{\r\n\t\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\t\tmessage: \"输入邮箱\",\r\n\t\t\t\t\t\t\ttrigger: \"blur\"\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\ttype: \"email\",\r\n\t\t\t\t\t\t\tmessage: \"输入正确的邮箱格式\",\r\n\t\t\t\t\t\t\ttrigger: \"blur\"\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t]\r\n\t\t\t\t},\r\n\t\t\t\t/*修改验证*/\r\n\t\t\t\truleModify: {\r\n\t\t\t\t\tname: [{\r\n\t\t\t\t\t\ttype: \"string\",\r\n\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\tmessage: \"输入用户名\",\r\n\t\t\t\t\t\ttrigger: \"blur\"\r\n\t\t\t\t\t}],\r\n\t\t\t\t\tpassword: [{\r\n\t\t\t\t\t\ttype: \"string\",\r\n\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\tmessage: \"输入密码\",\r\n\t\t\t\t\t\ttrigger: \"blur\"\r\n\t\t\t\t\t}],\r\n\t\t\t\t\temail: [{\r\n\t\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\t\tmessage: \"输入邮箱\",\r\n\t\t\t\t\t\t\ttrigger: \"blur\"\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\ttype: \"email\",\r\n\t\t\t\t\t\t\tmessage: \"输入正确的邮箱格式\",\r\n\t\t\t\t\t\t\ttrigger: \"blur\"\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t]\r\n\t\t\t\t},\r\n\t\t\t\t/*表显示字段*/\r\n\t\t\t\tcolumns1: [{\r\n\t\t\t\t\t\ttype: \"selection\",\r\n\t\t\t\t\t\twidth: 60,\r\n\t\t\t\t\t\talign: \"center\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttitle: \"用户名\",\r\n\t\t\t\t\t\tkey: \"name\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttitle: \"邮箱\",\r\n\t\t\t\t\t\tkey: \"email\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttitle: \"用户类型\",\r\n\t\t\t\t\t\talign: \"center\",\r\n\t\t\t\t\t\tkey: \"usertype\",\r\n\t\t\t\t\t\trender: (h, params) => {\r\n\t\t\t\t\t\t\tif (params.row.usertype == 0) {\r\n\t\t\t\t\t\t\t\treturn h(\"div\", [h(\"strong\", null, \"普通用户\")]);\r\n\t\t\t\t\t\t\t} else if (params.row.usertype == 1) {\r\n\t\t\t\t\t\t\t\treturn h(\"div\", [h(\"strong\", null, \"管理员\")]);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttitle: \"注册时间\",\r\n\t\t\t\t\t\talign: \"center\",\r\n\t\t\t\t\t\tkey: \"createTime\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttitle: \"操作\",\r\n\t\t\t\t\t\talign: \"center\",\r\n\t\t\t\t\t\tkey: \"action\",\r\n\t\t\t\t\t\trender: (h, params) => {\r\n\t\t\t\t\t\t\treturn h(\"div\", [\r\n\t\t\t\t\t\t\t\th(\r\n\t\t\t\t\t\t\t\t\t\"Button\", {\r\n\t\t\t\t\t\t\t\t\t\tprops: {\r\n\t\t\t\t\t\t\t\t\t\t\ttype: \"info\"\r\n\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\ton: {\r\n\t\t\t\t\t\t\t\t\t\t\tclick: () => {\r\n\t\t\t\t\t\t\t\t\t\t\t\tthis.relationSet(params.row);\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\"配置角色\"\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t]);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t],\r\n\t\t\t\t/*表数据*/\r\n\t\t\t\tdata1: [],\r\n\t\t\t\t/*表显示字段*/\r\n\t\t\t\tcolumns2: [{\r\n\t\t\t\t\t\ttype: \"selection\",\r\n\t\t\t\t\t\twidth: 60,\r\n\t\t\t\t\t\talign: \"center\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttitle: \"角色名称\",\r\n\t\t\t\t\t\twidth: 120,\r\n\t\t\t\t\t\tkey: \"name\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttitle: \"描述\",\r\n\t\t\t\t\t\tkey: \"describe\"\r\n\t\t\t\t\t}\r\n\t\t\t\t],\r\n\t\t\t\t/*表数据*/\r\n\t\t\t\tdata2: [],\r\n\t\t\t\t/*data2的临时存储*/\r\n\t\t\t\tdata2Temp: [],\r\n\t\t\t\t/*用户与角色关系列表*/\r\n\t\t\t\trelationList: null\r\n\t\t\t};\r\n\t\t},\r\n\t\tmounted() {\r\n\t\t\t/*页面初始化调用方法*/\r\n\t\t\tthis.getTable({\r\n\t\t\t\tpageInfo: this.pageInfo,\r\n\t\t\t\tname: this.name\r\n\t\t\t});\r\n\t\t\tthis.axios({\r\n\t\t\t\t\tmethod: \"get\",\r\n\t\t\t\t\turl: \"/roles/all\"\r\n\t\t\t\t})\r\n\t\t\t\t.then(\r\n\t\t\t\t\tfunction(response) {\r\n\t\t\t\t\t\tthis.data2Temp = response.data.data;\r\n\t\t\t\t\t}.bind(this)\r\n\t\t\t\t)\r\n\t\t\t\t.catch(function(error) {\r\n\t\t\t\t\talert(error);\r\n\t\t\t\t});\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\t/*pageInfo实体初始化*/\r\n\t\t\tinitPageInfo() {\r\n\t\t\t\tthis.pageInfo.page = 0;\r\n\t\t\t\tthis.pageInfo.pageSize = 10;\r\n\t\t\t},\r\n\t\t\t/*user实体初始化*/\r\n\t\t\tinitUser() {\r\n\t\t\t\tthis.user.id = null;\r\n\t\t\t\tthis.user.name = null;\r\n\t\t\t\tthis.user.loginName = null;\r\n\t\t\t\tthis.user.password = null;\r\n\t\t\t\tthis.user.email = null;\r\n\t\t\t},\r\n\t\t\t/*userNew实体初始化*/\r\n\t\t\tinitUserNew() {\r\n\t\t\t\tthis.userNew.id = null;\r\n\t\t\t\tthis.userNew.name = null;\r\n\t\t\t\tthis.userNew.loginName = null;\r\n\t\t\t\tthis.userNew.password = null;\r\n\t\t\t\tthis.userNew.passwordAgain = null;\r\n\t\t\t\tthis.userNew.email = null;\r\n\t\t\t},\r\n\t\t\t/*userModify实体初始化*/\r\n\t\t\tinitUserModify() {\r\n\t\t\t\tthis.userModify.id = null;\r\n\t\t\t\tthis.userModify.name = null;\r\n\t\t\t\tthis.userModify.loginName = null;\r\n\t\t\t\tthis.userModify.password = null;\r\n\t\t\t\tthis.userModify.email = null;\r\n\t\t\t},\r\n\t\t\t/*userNew设置*/\r\n\t\t\tuserSet(e) {\r\n\t\t\t\tthis.user.id = e.id;\r\n\t\t\t\tthis.user.name = e.name;\r\n\t\t\t\tthis.user.loginName = e.loginName;\r\n\t\t\t\tthis.user.password = e.password;\r\n\t\t\t\tthis.user.email = e.email;\r\n\t\t\t\tthis.user.usertype = e.usertype;\r\n\t\t\t\tthis.user.createTime = e.createTime;\r\n\t\t\t},\r\n\t\t\t/*userNew设置*/\r\n\t\t\tuserNewSet(e) {\r\n\t\t\t\tthis.userNew.id = e.id;\r\n\t\t\t\tthis.userNew.name = e.name;\r\n\t\t\t\tthis.userNew.loginName = e.loginName;\r\n\t\t\t\tthis.userNew.password = e.password;\r\n\t\t\t\tthis.userNew.passwordAgain = e.password;\r\n\t\t\t\tthis.userNew.email = e.email;\r\n\t\t\t},\r\n\t\t\t/*userModify设置*/\r\n\t\t\tuserModifySet(e) {\r\n\t\t\t\tthis.userModify.id = e.id;\r\n\t\t\t\tthis.userModify.name = e.name;\r\n\t\t\t\tthis.userModify.usertype = e.usertype;\r\n\t\t\t},\r\n\t\t\tdateGet(e) {\r\n\t\t\t\tvar time = new Date(parseInt(e));\r\n\t\t\t\treturn (\r\n\t\t\t\t\ttime.getFullYear() +\r\n\t\t\t\t\t\"-\" +\r\n\t\t\t\t\t(time.getMonth() + 1) +\r\n\t\t\t\t\t\"-\" +\r\n\t\t\t\t\ttime.getDate() +\r\n\t\t\t\t\t\" \" +\r\n\t\t\t\t\ttime.getHours() +\r\n\t\t\t\t\t\":\" +\r\n\t\t\t\t\ttime.getMinutes()\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t\tlistDateSet(e) {\r\n\t\t\t\tfor (var i = e.length - 1; i >= 0; i--) {\r\n\t\t\t\t\te[i].createTime = this.dateGet(e[i].createTime);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t/*得到表数据*/\r\n\t\t\tgetTable(e) {\r\n\t\t\t\tthis.axios({\r\n\t\t\t\t\t\tmethod: \"get\",\r\n\t\t\t\t\t\turl: \"/users\",\r\n\t\t\t\t\t\tparams: {\r\n\t\t\t\t\t\t\tpage: e.pageInfo.page,\r\n\t\t\t\t\t\t\tpageSize: e.pageInfo.pageSize,\r\n\t\t\t\t\t\t\tname: e.name\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.then(\r\n\t\t\t\t\t\tfunction(response) {\r\n\t\t\t\t\t\t\tthis.data1 = response.data.data.data;\r\n\t\t\t\t\t\t\tthis.listDateSet(this.data1);\r\n\t\t\t\t\t\t\tthis.total = response.data.data.totalCount;\r\n\t\t\t\t\t\t}.bind(this)\r\n\t\t\t\t\t)\r\n\t\t\t\t\t.catch(function(error) {\r\n\t\t\t\t\t\tconsole.log(error);\r\n\t\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t/*搜索按钮点击事件*/\r\n\t\t\tsearch() {\r\n\t\t\t\tthis.initPageInfo();\r\n\t\t\t\tthis.getTable({\r\n\t\t\t\t\tpageInfo: this.pageInfo,\r\n\t\t\t\t\tname: this.name\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t/*分页点击事件*/\r\n\t\t\tpageSearch(e) {\r\n\t\t\t\tthis.pageInfo.page = e - 1;\r\n\t\t\t\tthis.getTable({\r\n\t\t\t\t\tpageInfo: this.pageInfo,\r\n\t\t\t\t\tname: this.name\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t/*新建点击触发事件*/\r\n\t\t\topenNewModal() {\r\n\t\t\t\tthis.newModal = true;\r\n\t\t\t\tthis.initUserNew();\r\n\t\t\t\tthis.data1.sort();\r\n\t\t\t\tthis.count = 0;\r\n\t\t\t\tthis.groupId = null;\r\n\t\t\t},\r\n\t\t\t/*新建modal的newOk点击事件*/\r\n\t\t\tnewOk() {\r\n\t\t\t\tif (this.userNew.name == \"\" || this.userNew.name == null) {\r\n\t\t\t\t\tthis.$Message.warning(\"请输入用户名\");\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (this.userNew.password == \"\" || this.userNew.password == null) {\r\n\t\t\t\t\tthis.$Message.warning(\"请输入密码\");\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.userNew.loginName = this.userNew.name;\r\n\t\t\t\tthis.userNew.createTime = new Date().getTime();\r\n\r\n\t\t\t\tconsole.log(\"=====\" + JSON.stringify(this.userNew))\r\n\r\n\t\t\t\tthis.userSet(this.userNew);\r\n\t\t\t\tthis.axios({\r\n\t\t\t\t\t\tmethod: \"post\",\r\n\t\t\t\t\t\turl: \"/users/user\",\r\n\t\t\t\t\t\tdata: this.user\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.then(\r\n\t\t\t\t\t\tfunction(response) {\r\n\t\t\t\t\t\t\tconsole.log(JSON.stringify(response))\r\n\t\t\t\t\t\t\tif (response.data.status == '2000') {\r\n\t\t\t\t\t\t\t\tthis.initUserNew();\r\n\t\t\t\t\t\t\t\tthis.getTable({\r\n\t\t\t\t\t\t\t\t\tpageInfo: this.pageInfo,\r\n\t\t\t\t\t\t\t\t\tname: this.name\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\tthis.newModal = false;\r\n\t\t\t\t\t\t\t\tthis.$Message.info(\"新建成功\");\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tthis.$Modal.error({\r\n\t\t\t\t\t\t\t\t\ttitle: '提示',\r\n\t\t\t\t\t\t\t\t\tcontent: \"创建用户失败\"\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}.bind(this)\r\n\t\t\t\t\t)\r\n\t\t\t\t\t.catch(function(error) {\r\n\t\t\t\t\t\talert(error);\r\n\t\t\t\t\t});\r\n\r\n\t\t\t},\r\n\t\t\t/*点击修改时判断是否只选择一个*/\r\n\t\t\topenModifyModal() {\r\n\t\t\t\tif (this.count > 1 || this.count < 1) {\r\n\t\t\t\t\tthis.modifyModal = false;\r\n\t\t\t\t\tthis.$Message.warning(\"请至少选择一项(且只能选择一项)\");\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.modifyModal = true;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t/*修改modal的modifyOk点击事件*/\r\n\t\t\tmodifyOk() {\r\n\t\t\t\t// this.initUser();\r\n\t\t\t\t// this.userSet(this.userModify);\r\n\t\t\t\tthis.axios({\r\n\t\t\t\t\t\tmethod: \"put\",\r\n\t\t\t\t\t\turl: \"/users/user\",\r\n\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\tname: this.userModify.name,\r\n\t\t\t\t\t\t\tusertype: this.userModify.usertype,\r\n\t\t\t\t\t\t\tid: this.userModify.id\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.then(\r\n\t\t\t\t\t\tfunction(response) {\r\n\t\t\t\t\t\t\tthis.initUserNew();\r\n\t\t\t\t\t\t\tthis.getTable({\r\n\t\t\t\t\t\t\t\tpageInfo: this.pageInfo,\r\n\t\t\t\t\t\t\t\tname: this.name\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tthis.$Message.info(\"修改成功\");\r\n\t\t\t\t\t\t}.bind(this)\r\n\t\t\t\t\t)\r\n\t\t\t\t\t.catch(function(error) {\r\n\t\t\t\t\t\talert(error);\r\n\t\t\t\t\t});\r\n\t\t\t\tthis.modifyModal = false;\r\n\t\t\t},\r\n\t\t\t/*modal的cancel点击事件*/\r\n\t\t\tcancel() {\r\n\t\t\t\tthis.newModal = false;\r\n\t\t\t\tthis.modifyModal = false;\r\n\t\t\t\t//this.$Message.info(\"点击了取消\");\r\n\t\t\t},\r\n\t\t\t/*table选择后触发事件*/\r\n\t\t\tchange(e) {\r\n\t\t\t\tif (e.length == 1) {\r\n\t\t\t\t\tthis.userModifySet(e[\"0\"]);\r\n\t\t\t\t}\r\n\t\t\t\tthis.setGroupId(e);\r\n\t\t\t},\r\n\t\t\t/*通过选中的行设置groupId的值*/\r\n\t\t\tsetGroupId(e) {\r\n\t\t\t\tthis.groupId = [];\r\n\t\t\t\tthis.count = e.length;\r\n\t\t\t\tfor (var i = 0; i <= e.length - 1; i++) {\r\n\t\t\t\t\tthis.groupId.push(e[i].id);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t/*删除table中选中的数据*/\r\n\t\t\tdel() {\r\n\t\t\t\tif (this.groupId != null && this.groupId != \"\") {\r\n\t\t\t\t\tthis.axios({\r\n\t\t\t\t\t\t\tmethod: \"delete\",\r\n\t\t\t\t\t\t\turl: \"/users\",\r\n\t\t\t\t\t\t\tdata: this.groupId\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.then(\r\n\t\t\t\t\t\t\tfunction(response) {\r\n\t\t\t\t\t\t\t\tthis.getTable({\r\n\t\t\t\t\t\t\t\t\tpageInfo: this.pageInfo,\r\n\t\t\t\t\t\t\t\t\tname: this.name\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\tthis.groupId = null;\r\n\t\t\t\t\t\t\t\tthis.count = 0;\r\n\t\t\t\t\t\t\t\tthis.$Message.info(\"删除成功\");\r\n\t\t\t\t\t\t\t}.bind(this)\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t\t.catch(function(error) {\r\n\t\t\t\t\t\t\talert(error);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t/*表格中双击事件*/\r\n\t\t\tdblclick(e) {\r\n\t\t\t\tthis.userModifySet(e);\r\n\t\t\t\tthis.modifyModal = true;\r\n\t\t\t\tthis.data1.sort();\r\n\t\t\t},\r\n\t\t\t/*流程配置*/\r\n\t\t\trelationSet(e) {\r\n\t\t\t\tthis.roleModal = true;\r\n\t\t\t\tthis.data2 = [];\r\n\t\t\t\tthis.axios({\r\n\t\t\t\t\t\tmethod: \"get\",\r\n\t\t\t\t\t\turl: \"/relations/\" + e.id\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.then(\r\n\t\t\t\t\t\tfunction(response) {\r\n\t\t\t\t\t\t\tvar roleList = [];\r\n\t\t\t\t\t\t\tfor (var i in response.data.data) {\r\n\t\t\t\t\t\t\t\troleList.push(response.data.data[i].roleId);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tfor (var i in this.data2Temp) {\r\n\t\t\t\t\t\t\t\tif (roleList.indexOf(this.data2Temp[i].id) == -1) {\r\n\t\t\t\t\t\t\t\t\tthis.data2.push({\r\n\t\t\t\t\t\t\t\t\t\tid: this.data2Temp[i].id,\r\n\t\t\t\t\t\t\t\t\t\tname: this.data2Temp[i].name,\r\n\t\t\t\t\t\t\t\t\t\tdescribe: this.data2Temp[i].describe,\r\n\t\t\t\t\t\t\t\t\t\tuserId: e.id,\r\n\t\t\t\t\t\t\t\t\t\t_checked: false\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tthis.data2.push({\r\n\t\t\t\t\t\t\t\t\t\tid: this.data2Temp[i].id,\r\n\t\t\t\t\t\t\t\t\t\tname: this.data2Temp[i].name,\r\n\t\t\t\t\t\t\t\t\t\tdescribe: this.data2Temp[i].describe,\r\n\t\t\t\t\t\t\t\t\t\tuserId: e.id,\r\n\t\t\t\t\t\t\t\t\t\t_checked: true\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}.bind(this)\r\n\t\t\t\t\t)\r\n\t\t\t\t\t.catch(function(error) {\r\n\t\t\t\t\t\talert(error);\r\n\t\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t/*配置角色modal确认按钮点击事件*/\r\n\t\t\troleOk() {\r\n\t\t\t\tif (this.relationList != null) {\r\n\t\t\t\t\tthis.axios({\r\n\t\t\t\t\t\t\tmethod: \"post\",\r\n\t\t\t\t\t\t\turl: \"/relations\",\r\n\t\t\t\t\t\t\tdata: this.relationList\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.then(\r\n\t\t\t\t\t\t\tfunction(response) {\r\n\t\t\t\t\t\t\t\tthis.$Message.info(\"配置成功\");\r\n\t\t\t\t\t\t\t}.bind(this)\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t\t.catch(function(error) {\r\n\t\t\t\t\t\t\talert(error);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\tthis.relationList = null;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t/*配置角色modal中表选择改变事件*/\r\n\t\t\tchange2(e) {\r\n\t\t\t\tthis.relationList = [];\r\n\t\t\t\tif (e.length == 0) {\r\n\t\t\t\t\tthis.relationList.push({\r\n\t\t\t\t\t\tuserId: this.data2[0].userId\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\tfor (var i in e) {\r\n\t\t\t\t\tthis.relationList.push({\r\n\t\t\t\t\t\tuserId: e[i].userId,\r\n\t\t\t\t\t\troleId: e[i].id\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n</script>\n"]}]}