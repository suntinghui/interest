{"remainingRequest":"E:\\workspace\\javaEE\\interest\\interest-web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\workspace\\javaEE\\interest\\interest-web\\src\\views\\sys\\interest\\interest-create.vue?vue&type=style&index=0&lang=css&","dependencies":[{"path":"E:\\workspace\\javaEE\\interest\\interest-web\\src\\views\\sys\\interest\\interest-create.vue","mtime":1568861049932},{"path":"E:\\workspace\\javaEE\\interest\\interest-web\\node_modules\\css-loader\\index.js","mtime":499162500000},{"path":"E:\\workspace\\javaEE\\interest\\interest-web\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"E:\\workspace\\javaEE\\interest\\interest-web\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"E:\\workspace\\javaEE\\interest\\interest-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\workspace\\javaEE\\interest\\interest-web\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\r\n.editor {\r\n  width: 90%;\r\n}\r\n.editor .ql-container {\r\n  height: 30rem;\r\n}\r\n",{"version":3,"sources":["interest-create.vue"],"names":[],"mappings":";AACA;AACA;AACA;AACA;AACA;AACA","file":"interest-create.vue","sourceRoot":"src/views/sys/interest","sourcesContent":["<style type=\"text/css\">\r\n.editor {\r\n  width: 90%;\r\n}\r\n.editor .ql-container {\r\n  height: 30rem;\r\n}\r\n</style>\r\n<template>\r\n\t<div style=\"margin: 20px;\">\r\n        <Form ref=\"entity\" :model=\"entity\" :rules=\"ruleNew\" :label-width=\"80\" >\r\n            <Form-item label=\"标题：\" prop=\"title\">\r\n                <Input v-model=\"entity.title\" style=\"width: 204px\"/>\r\n            </Form-item>\r\n            <Form-item label=\"简介：\" prop=\"info\">\r\n                <Input v-model=\"entity.info\" type=\"textarea\" :autosize=\"{minRows: 4,maxRows: 5}\"style=\"width: 50%\" />\r\n            </Form-item>\r\n            <Form-item label=\"图片：\" prop=\"image\">\r\n                <Upload \r\n                    ref=\"upload\"\r\n                    :headers=\"headers\"\r\n                    action=\"/interest/admin/interest/upload/picture\"\r\n                    name=\"picture\"\r\n                    :show-upload-list=\"false\"\r\n                    :before-upload=\"handleBeforeUpload\"\r\n                    :on-success=\"handleSuccess\"\r\n                    :on-format-error=\"handleFormatError\"\r\n                    :format=\"['jpg','jpeg','png']\">\r\n                    <Button icon=\"ios-cloud-upload-outline\">上传图片</Button>\r\n                </Upload>\r\n            </Form-item>\r\n            <Form-item>\r\n                <img v-if=\"entity.image != null\" :src=\"entity.image\" style=\"width: 300px;height: 200px\">\r\n            </Form-item>\r\n            <Form-item label=\"详情：\" prop=\"content\">\r\n                <!-- <quill-editor class=\"editor\"\r\n                  v-model=\"content\" \r\n                  ref=\"myQuillEditor\" \r\n                  :options=\"editorOption\" \r\n                  @blur=\"onEditorBlur($event)\" @focus=\"onEditorFocus($event)\"\r\n                  @change=\"onEditorChange($event)\">\r\n                </quill-editor> -->\r\n                <interest-quill-editor class=\"editor\" v-bind:interestContent=\"interestContent\" @editor-change=\"e=>{contentGet(e)}\"></interest-quill-editor>\r\n            </Form-item>\r\n            <FormItem>\r\n                <Button type=\"primary\" @click=\"submit('entity')\">提交</Button>\r\n                <Button @click=\"reset()\" style=\"margin-left: 8px\">重置</Button>\r\n            </FormItem>\r\n        </Form>\r\n    </div>\r\n</template>\r\n<script>\r\nimport InterestQuillEditor from \"./interest-quill-editor\";\r\nexport default {\r\n  components: {\r\n    \"interest-quill-editor\": InterestQuillEditor\r\n  },\r\n  data() {\r\n    return {\r\n      interestContent: \"\",\r\n      content: null,\r\n      headers: {\r\n        Authorization: \"bearer \" + localStorage.getItem(\"currentUser_token\")\r\n      },\r\n      /*entity实体*/\r\n      entity: {\r\n        title: null,\r\n        info: null,\r\n        image: null,\r\n        content: null\r\n      },\r\n      /*新建验证*/\r\n      ruleNew: {\r\n        title: [\r\n          {\r\n            type: \"string\",\r\n            required: true,\r\n            message: \"填写标题\",\r\n            trigger: \"blur\"\r\n          }\r\n        ],\r\n        info: [\r\n          {\r\n            type: \"string\",\r\n            required: true,\r\n            message: \"填写介绍\",\r\n            trigger: \"blur\"\r\n          }\r\n        ],\r\n        image: [\r\n          {\r\n            type: \"string\",\r\n            required: true,\r\n            message: \"上传图片\",\r\n            trigger: \"blur\"\r\n          }\r\n        ],\r\n        content: [\r\n          {\r\n            type: \"string\",\r\n            required: true,\r\n            message: \"填写内容\",\r\n            trigger: \"blur\"\r\n          }\r\n        ]\r\n      }\r\n    };\r\n  },\r\n  mounted() {\r\n    // console.log(this.$refs.myQuillEditor);\r\n    /*页面初始化调用方法*/\r\n    //this.getTable();\r\n  },\r\n  methods: {\r\n    /*entity实体初始化*/\r\n    initEntity() {\r\n      this.entity.title = null;\r\n      this.entity.info = null;\r\n      this.entity.image = null;\r\n      this.entity.content = null;\r\n    },\r\n    /*entityNew设置*/\r\n    entitySet(e) {\r\n      this.entity.title = e.title;\r\n      this.entity.info = e.info;\r\n      this.entity.image = e.image;\r\n      this.entity.content = e.content;\r\n    },\r\n    dateGet(e) {\r\n      var time = new Date(parseInt(e));\r\n      return (\r\n        time.getFullYear() +\r\n        \"-\" +\r\n        (time.getMonth() + 1) +\r\n        \"-\" +\r\n        time.getDate() +\r\n        \" \" +\r\n        time.getHours() +\r\n        \":\" +\r\n        time.getMinutes()\r\n      );\r\n    },\r\n    listDateSet(e) {\r\n      for (var i = e.length - 1; i >= 0; i--) {\r\n        e[i].time = this.dateGet(e[i].time);\r\n      }\r\n    },\r\n    handleSuccess(res, file) {\r\n      this.entity.image = res.data.url;\r\n      file.url = res.data.url;\r\n      file.name = res.data.url;\r\n    },\r\n    handleBeforeUpload() {\r\n      this.$refs.upload.fileList.splice(0, this.$refs.upload.fileList.length);\r\n      return true;\r\n    },\r\n    handleFormatError(file) {\r\n      this.$Notice.warning({\r\n        title: \"图片格式不对\",\r\n        desc: \"图片格式只能为jpg,jpeg,png\"\r\n      });\r\n    },\r\n    contentGet(e) {\r\n      this.entity.content = e;\r\n    },\r\n    submit(entity) {\r\n      this.$refs[entity].validate(valid => {\r\n        if (valid) {\r\n          this.axios({\r\n            method: \"post\",\r\n            url: \"/admin/interests/interest\",\r\n            data: this.entity\r\n          })\r\n            .then(\r\n              function(response) {\r\n                this.interestContent = this.interestContent + \".\";\r\n                this.initEntity();\r\n                this.$Message.info(\"新建成功\");\r\n              }.bind(this)\r\n            )\r\n            .catch(\r\n              function(error) {\r\n                this.$Message.error(\"新建失败\");\r\n              }.bind(this)\r\n            );\r\n        }\r\n      });\r\n    },\r\n    reset() {\r\n      this.interestContent = this.interestContent + \".\";\r\n      this.initEntity();\r\n    }\r\n  }\r\n};\r\n</script>\r\n"]}]}