{"remainingRequest":"E:\\workspace\\javaEE\\interest\\interest-web\\node_modules\\babel-loader\\lib\\index.js!E:\\workspace\\javaEE\\interest\\interest-web\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!E:\\workspace\\javaEE\\interest\\interest-web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\workspace\\javaEE\\interest\\interest-web\\src\\views\\rainbow\\djqdatj\\jqsxxx.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\workspace\\javaEE\\interest\\interest-web\\src\\views\\rainbow\\djqdatj\\jqsxxx.vue","mtime":1579495777812},{"path":"E:\\workspace\\javaEE\\interest\\interest-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\workspace\\javaEE\\interest\\interest-web\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\workspace\\javaEE\\interest\\interest-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\workspace\\javaEE\\interest\\interest-web\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport util from '../../../util.js';\nimport data from '../../../data.js'; // for axios add finally\n\nimport promiseFinally from 'promise.prototype.finally';\npromiseFinally.shim();\nimport deviceInfo from '../../component/deviceInfo';\nexport default {\n  data: function data() {\n    var _this = this;\n\n    return {\n      dateValue: ['2019-12-01', util.dateFormat(new Date())],\n      dataList: [],\n      // 列表数据\n      showDetailModel: false,\n      // 控制是否显示详情\n      detailInfo: {},\n      // 某条数据下的所有的详情信息\n      transferInfo: {},\n      selectValue: {},\n      tabCheck: \"name1\",\n      showSpin: false,\n      detailTitle: '加载中...',\n      searchContent: null,\n      groupId: [],\n      total: 0,\n\n      /*pageInfo实体*/\n      pageInfo: {\n        page: 0,\n        pageSize: 10\n      },\n      columns_list: [{\n        title: \"机器编号\",\n        key: \"机器编号\",\n        align: \"center\",\n        sortable: true,\n        width: 200\n      }, {\n        title: \"网点编号\",\n        key: \"网点编号\",\n        align: \"center\",\n        sortable: true,\n        width: 150\n      }, {\n        title: \"启用时间\",\n        key: \"启用时间\",\n        align: \"center\",\n        sortable: true,\n        width: 180\n      }, {\n        title: \"设备类型\",\n        key: \"设备类型\",\n        align: \"center\",\n        sortable: true,\n        width: 120\n      }, {\n        title: \"设备位置\",\n        key: \"设备位置\",\n        align: \"center\"\n      }, {\n        title: \"操作\",\n        key: \"Action\",\n        align: \"center\",\n        width: 150,\n        render: function render(h, params) {\n          return h('Button', {\n            props: {\n              type: \"primary\"\n            },\n            on: {\n              click: function click() {\n                _this.showDetailInfo(params.row);\n              }\n            }\n          }, \"详情\");\n        }\n      }]\n    };\n  },\n  components: {\n    'deviceInfoModal': deviceInfo\n  },\n  mounted: function mounted() {\n    // 查询所有的参数\n    this.$store.dispatch('queryAllParam');\n    /*页面初始化调用方法*/\n\n    this.getDataList({\n      pageInfo: this.pageInfo\n    });\n  },\n  methods: {\n    initPageInfo: function initPageInfo() {\n      this.pageInfo.page = 0;\n      this.pageInfo.pageSize = 10;\n    },\n    search: function search() {\n      this.initPageInfo();\n      this.getDataList({\n        pageInfo: this.pageInfo\n      });\n    },\n\n    /*得到列表数据*/\n    getDataList: function getDataList(e) {\n      this.showSpin = true;\n      this.axios({\n        method: \"get\",\n        url: \"/rainbow/jqsxxx_list\",\n        timeout: 1000 * 60 * 2,\n        params: {\n          page: e.pageInfo.page,\n          pageSize: e.pageInfo.pageSize,\n          filterMap: {\n            startDate: this.dateValue[0],\n            endDate: this.dateValue[1],\n            deviceTypeValue: this.selectValue.deviceTypeValue,\n            areaValue: this.selectValue.areaValue,\n            channelValue: this.selectValue.channelValue,\n            shopValue: this.selectValue.shopValue\n          }\n        }\n      }).then(function (response) {\n        console.log(JSON.stringify(response));\n        this.total = response.data.data.totalCount;\n        this.dataList = response.data.data.data;\n      }.bind(this)).catch(function (error) {\n        alert(error);\n      }).finally(function () {\n        this.showSpin = false;\n      }.bind(this));\n    },\n\n    /*得到详情数据*/\n    showDetailInfo: function showDetailInfo(rowData) {\n      this.showDetailModel = false;\n      this.tabCheck = \"name1\"; // 默认刚打开时保证总是显示第一个tab\n\n      console.log(JSON.stringify(rowData));\n      this.detailInfo = []; // 置空详情数据，否则打开时仍然是上次的数据\n\n      this.transferInfo = [];\n      this.queryDetailInfo(rowData['机器编号'], rowData['网点编号']);\n      this.queryTransferInfo(rowData['机器编号'], rowData['网点编号']);\n    },\n    queryDetailInfo: function queryDetailInfo(ddiNo, shopNo) {\n      this.detailTitle = '加载中...';\n      this.showSpin = true;\n      this.axios({\n        method: \"get\",\n        url: \"/rainbow/jqsxxx_detail\",\n        params: {\n          filterMap: {\n            ddiNo: ddiNo,\n            shopValue: shopNo,\n            startDate: this.dateValue[0],\n            endDate: this.dateValue[1]\n          }\n        }\n      }).then(function (response) {\n        console.log(JSON.stringify(response));\n        this.detailTitle = '详情信息';\n        this.detailInfo = response.data.data;\n        this.showDetailModel = true;\n      }.bind(this)).catch(function (error) {\n        alert(error);\n        this.showSpin = false;\n      }).finally(function () {}.bind(this));\n    },\n    queryTransferInfo: function queryTransferInfo(ddiNo, shopNo) {\n      this.showSpin = true;\n      this.axios({\n        method: \"get\",\n        url: \"/rainbow/jqsxxx_transfer_list\",\n        params: {\n          filterMap: {\n            ddiNo: ddiNo,\n            shopValue: shopNo,\n            startDate: this.dateValue[0],\n            endDate: this.dateValue[1]\n          }\n        }\n      }).then(function (response) {\n        console.log(JSON.stringify(response));\n        this.transferInfo = response.data.data;\n      }.bind(this)).catch(function (error) {\n        alert(error);\n        this.showSpin = false;\n      }).finally(function () {}.bind(this));\n    },\n\n    /*分页点击事件*/\n    pageSearch: function pageSearch(e) {\n      this.pageInfo.page = e - 1;\n      this.getDataList({\n        pageInfo: this.pageInfo\n      });\n    },\n    // 改变每页显示条数时触发\n    pageSizeChange: function pageSizeChange(e) {\n      this.pageInfo.pageSize = e;\n      this.pageInfo.page = 0;\n      this.getDataList({\n        pageInfo: this.pageInfo\n      });\n    },\n    handleDateChange: function handleDateChange(daterange) {\n      this.dateValue = daterange;\n    },\n    closeSpin: function closeSpin() {\n      console.log(\"============================================\");\n      this.showSpin = false;\n    }\n  }\n};",{"version":3,"sources":["jqsxxx.vue"],"names":[],"mappings":"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","sourcesContent":["<!-- 机器属性信息  -->\r\n<style>\r\n\t.detailDiv {\r\n\t\tmargin-top: 0.3125rem;\r\n\t\tmargin-bottom: 0.3125rem;\r\n\t\tmargin-left: 1.25rem;\r\n\t}\r\n\t.keyDetail {\r\n\t\tfont-size: 14px;\r\n\t\tdisplay:-moz-inline-box;\r\n\t\tdisplay:inline-block;\r\n\t\twidth: 5rem;\r\n\t\tmargin-top: 0.3125rem;\r\n\t\tmargin-bottom: 0.3125rem;\r\n\t}\r\n\t.valueDetail {\r\n\t\tfont-size: 14px;\r\n\t}\r\n\t\r\n</style>\r\n\r\n<template>\r\n\t<div style=\"margin-top: 10px; margin-bottom: 10px;\">\r\n\t\t<div style=\"margin-left: 20px; margin-right: 20px;\">\r\n\t\t\t<Row style=\"margin-bottom: 25px;\">\r\n\r\n\t\t\t\t<Col span=\"8\">日期：\r\n\t\t\t\t<Date-picker :value=\"dateValue\" @on-change='handleDateChange' type=\"daterange\" editable=\"false\" :options=\"dateOptions\"\r\n\t\t\t\t placement=\"bottom-start\" :clearable=\"false\" placeholder=\"选择日期\" style=\"width: 250px\"></Date-picker>\r\n\t\t\t\t</Col>\r\n\r\n\t\t\t\t<Col span=\"8\">设备：\r\n\t\t\t\t<Select v-model=\"selectValue.deviceTypeValue\" filterable clearable style=\"width: 250px\">\r\n\t\t\t\t\t<Option v-for=\"item in this.$store.state.param.deviceTypeList\" :value=\"item.paramKey\" :key=\"item.paramKey\">{{ item.paramValue }}</Option>\r\n\t\t\t\t</Select>\r\n\t\t\t\t</Col>\r\n\r\n\t\t\t\t<Col span=\"8\">所属地区：\r\n\t\t\t\t<Select v-model=\"selectValue.areaValue\" filterable clearable style=\"width: 250px\">\r\n\t\t\t\t\t<Option v-for=\"item in this.$store.state.param.areaList\" :value=\"item.paramKey\" :key=\"item.paramKey\">{{ item.paramValue }}</Option>\r\n\t\t\t\t</Select>\r\n\t\t\t\t</Col>\r\n\r\n\t\t\t</Row>\r\n\t\t\t<Row style=\"margin-bottom: 25px;\">\r\n\r\n\t\t\t\t<Col span=\"8\">渠道：\r\n\t\t\t\t<Select v-model=\"selectValue.channelValue\" filterable clearable style=\"width: 250px\">\r\n\t\t\t\t\t<Option v-for=\"item in this.$store.state.param.channelList\" :value=\"item.paramValue\" :key=\"item.paramValue\">{{ item.paramValue }}</Option>\r\n\t\t\t\t</Select>\r\n\t\t\t\t</Col>\r\n\r\n\t\t\t\t<Col span=\"8\">网点：\r\n\t\t\t\t<Select v-model=\"selectValue.shopValue\" filterable clearable style=\"width: 250px\">\r\n\t\t\t\t\t<Option v-for=\"item in this.$store.state.param.shopList\" :value=\"item.paramKey\" :key=\"item.paramKey\">{{ item.paramValue }}-{{item.paramKey}}</Option>\r\n\t\t\t\t</Select>\r\n\t\t\t\t</Col>\r\n\r\n\t\t\t\t<Col span=\"8\" style=\"display: none;\">网点类型：\r\n\t\t\t\t<Select v-model=\"selectValue.shopTypeValue\" filterable clearable style=\"width: 250px\">\r\n\t\t\t\t\t<Option v-for=\"item in this.$store.state.param.shopTypeList\" :value=\"item.paramKey\" :key=\"item.paramKey\">{{ item.paramValue }}</Option>\r\n\t\t\t\t</Select>\r\n\t\t\t\t</Col>\r\n\r\n\t\t\t\t<Col span=\"8\" style=\"text-align: left;\"><Button type=\"primary\" shape=\"circle\" icon=\"ios-search\" @click=\"search()\">搜索</Button></Col>\r\n\t\t\t</Row>\r\n\t\t</div>\r\n\r\n\t\t<Spin size=\"large\" fix v-if=\"showSpin\"></Spin>\r\n\r\n\t\t<div style=\"padding: 10px 0;\">\r\n\t\t\t<Table border :columns=\"columns_list\" :data=\"dataList\"></Table>\r\n\t\t</div>\r\n\r\n\t\t<div style=\"text-align: right;\">\r\n\t\t\t<Page :total=\"total\" :page-size=\"pageInfo.pageSize\" show-sizer show-total @on-page-size-change=\"e=>{pageSizeChange(e)}\"\r\n\t\t\t @on-change=\"e=>{pageSearch(e)}\"></Page>\r\n\t\t</div>\r\n\r\n\t\t<deviceInfoModal :showModal=\"showDetailModel\" :detailInfo='detailInfo' :transferInfo='transferInfo' :detailTitle=\"detailTitle\" :tabCheck=\"tabCheck\" @closeSpin=\"closeSpin\" ></deviceInfoModal>\r\n\r\n\t</div>\r\n\r\n</template>\r\n\r\n<script>\r\n\timport util from '../../../util.js'\r\n\timport data from '../../../data.js'\r\n\r\n\t// for axios add finally\r\n\timport promiseFinally from 'promise.prototype.finally';\r\n\tpromiseFinally.shim();\r\n\r\n\timport deviceInfo from '../../component/deviceInfo'\r\n\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tdateValue: ['2019-12-01', util.dateFormat(new Date())],\r\n\t\t\t\tdataList: [], // 列表数据\r\n\r\n\t\t\t\tshowDetailModel: false, // 控制是否显示详情\r\n\t\t\t\tdetailInfo: {}, // 某条数据下的所有的详情信息\r\n\t\t\t\ttransferInfo: {},\r\n\r\n\t\t\t\tselectValue: {},\r\n\r\n\t\t\t\ttabCheck: \"name1\",\r\n\t\t\t\tshowSpin: false,\r\n\t\t\t\tdetailTitle: '加载中...',\r\n\t\t\t\tsearchContent: null,\r\n\t\t\t\tgroupId: [],\r\n\t\t\t\ttotal: 0,\r\n\t\t\t\t/*pageInfo实体*/\r\n\t\t\t\tpageInfo: {\r\n\t\t\t\t\tpage: 0,\r\n\t\t\t\t\tpageSize: 10\r\n\t\t\t\t},\r\n\r\n\t\t\t\tcolumns_list: [{\r\n\t\t\t\t\t\ttitle: \"机器编号\",\r\n\t\t\t\t\t\tkey: \"机器编号\",\r\n\t\t\t\t\t\talign: \"center\",\r\n\t\t\t\t\t\tsortable: true,\r\n\t\t\t\t\t\twidth: 200\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttitle: \"网点编号\",\r\n\t\t\t\t\t\tkey: \"网点编号\",\r\n\t\t\t\t\t\talign: \"center\",\r\n\t\t\t\t\t\tsortable: true,\r\n\t\t\t\t\t\twidth: 150\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttitle: \"启用时间\",\r\n\t\t\t\t\t\tkey: \"启用时间\",\r\n\t\t\t\t\t\talign: \"center\",\r\n\t\t\t\t\t\tsortable: true,\r\n\t\t\t\t\t\twidth: 180\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttitle: \"设备类型\",\r\n\t\t\t\t\t\tkey: \"设备类型\",\r\n\t\t\t\t\t\talign: \"center\",\r\n\t\t\t\t\t\tsortable: true,\r\n\t\t\t\t\t\twidth: 120\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttitle: \"设备位置\",\r\n\t\t\t\t\t\tkey: \"设备位置\",\r\n\t\t\t\t\t\talign: \"center\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttitle: \"操作\",\r\n\t\t\t\t\t\tkey: \"Action\",\r\n\t\t\t\t\t\talign: \"center\",\r\n\t\t\t\t\t\twidth: 150,\r\n\t\t\t\t\t\trender: (h, params) => {\r\n\t\t\t\t\t\t\treturn h('Button', {\r\n\t\t\t\t\t\t\t\tprops: {\r\n\t\t\t\t\t\t\t\t\ttype: \"primary\"\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\ton: {\r\n\t\t\t\t\t\t\t\t\tclick: () => {\r\n\t\t\t\t\t\t\t\t\t\tthis.showDetailInfo(params.row)\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}, \"详情\")\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t],\r\n\r\n\t\t\t};\r\n\t\t},\r\n\r\n\t\tcomponents: {\r\n\t\t\t'deviceInfoModal': deviceInfo\r\n\t\t},\r\n\r\n\t\tmounted() {\r\n\t\t\t// 查询所有的参数\r\n\t\t\tthis.$store.dispatch('queryAllParam');\r\n\r\n\t\t\t/*页面初始化调用方法*/\r\n\t\t\tthis.getDataList({\r\n\t\t\t\tpageInfo: this.pageInfo\r\n\t\t\t});\r\n\r\n\t\t},\r\n\r\n\t\tmethods: {\r\n\t\t\tinitPageInfo() {\r\n\t\t\t\tthis.pageInfo.page = 0;\r\n\t\t\t\tthis.pageInfo.pageSize = 10;\r\n\t\t\t},\r\n\r\n\t\t\tsearch() {\r\n\t\t\t\tthis.initPageInfo();\r\n\t\t\t\tthis.getDataList({\r\n\t\t\t\t\tpageInfo: this.pageInfo\r\n\t\t\t\t});\r\n\r\n\t\t\t},\r\n\r\n\t\t\t/*得到列表数据*/\r\n\t\t\tgetDataList(e) {\r\n\t\t\t\tthis.showSpin = true;\r\n\r\n\t\t\t\tthis.axios({\r\n\t\t\t\t\t\tmethod: \"get\",\r\n\t\t\t\t\t\turl: \"/rainbow/jqsxxx_list\",\r\n\t\t\t\t\t\ttimeout: 1000 * 60 * 2,\r\n\t\t\t\t\t\tparams: {\r\n\t\t\t\t\t\t\tpage: e.pageInfo.page,\r\n\t\t\t\t\t\t\tpageSize: e.pageInfo.pageSize,\r\n\t\t\t\t\t\t\tfilterMap: {\r\n\t\t\t\t\t\t\t\tstartDate: this.dateValue[0],\r\n\t\t\t\t\t\t\t\tendDate: this.dateValue[1],\r\n\t\t\t\t\t\t\t\tdeviceTypeValue: this.selectValue.deviceTypeValue,\r\n\t\t\t\t\t\t\t\tareaValue: this.selectValue.areaValue,\r\n\t\t\t\t\t\t\t\tchannelValue: this.selectValue.channelValue,\r\n\t\t\t\t\t\t\t\tshopValue: this.selectValue.shopValue\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.then(\r\n\t\t\t\t\t\tfunction(response) {\r\n\t\t\t\t\t\t\tconsole.log(JSON.stringify(response))\r\n\r\n\t\t\t\t\t\t\tthis.total = response.data.data.totalCount;\r\n\t\t\t\t\t\t\tthis.dataList = response.data.data.data;\r\n\r\n\t\t\t\t\t\t}.bind(this)\r\n\t\t\t\t\t)\r\n\t\t\t\t\t.catch(function(error) {\r\n\t\t\t\t\t\talert(error);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.finally(function() {\r\n\t\t\t\t\t\tthis.showSpin = false;\r\n\t\t\t\t\t}.bind(this));\r\n\r\n\t\t\t},\r\n\r\n\t\t\t/*得到详情数据*/\r\n\t\t\tshowDetailInfo(rowData) {\r\n\t\t\t\tthis.showDetailModel = false;\r\n\t\t\t\t\r\n\t\t\t\tthis.tabCheck = \"name1\"; // 默认刚打开时保证总是显示第一个tab\r\n\r\n\t\t\t\tconsole.log(JSON.stringify(rowData))\r\n\r\n\t\t\t\tthis.detailInfo = []; // 置空详情数据，否则打开时仍然是上次的数据\r\n\r\n\t\t\t\tthis.transferInfo = [];\r\n\r\n\t\t\t\tthis.queryDetailInfo(rowData['机器编号'], rowData['网点编号']);\r\n\r\n\t\t\t\tthis.queryTransferInfo(rowData['机器编号'], rowData['网点编号']);\r\n\r\n\t\t\t},\r\n\r\n\t\t\tqueryDetailInfo(ddiNo, shopNo) {\r\n\t\t\t\tthis.detailTitle = '加载中...';\r\n\r\n\t\t\t\tthis.showSpin = true;\r\n\r\n\t\t\t\tthis.axios({\r\n\t\t\t\t\t\tmethod: \"get\",\r\n\t\t\t\t\t\turl: \"/rainbow/jqsxxx_detail\",\r\n\t\t\t\t\t\tparams: {\r\n\t\t\t\t\t\t\tfilterMap: {\r\n\t\t\t\t\t\t\t\tddiNo: ddiNo,\r\n\t\t\t\t\t\t\t\tshopValue: shopNo,\r\n\t\t\t\t\t\t\t\tstartDate: this.dateValue[0],\r\n\t\t\t\t\t\t\t\tendDate: this.dateValue[1]\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.then(\r\n\t\t\t\t\t\tfunction(response) {\r\n\t\t\t\t\t\t\tconsole.log(JSON.stringify(response))\r\n\r\n\t\t\t\t\t\t\tthis.detailTitle = '详情信息';\r\n\r\n\t\t\t\t\t\t\tthis.detailInfo = response.data.data;\r\n\r\n\t\t\t\t\t\t\tthis.showDetailModel = true;\r\n\r\n\t\t\t\t\t\t}.bind(this)\r\n\t\t\t\t\t)\r\n\t\t\t\t\t.catch(function(error) {\r\n\t\t\t\t\t\talert(error);\r\n\t\t\t\t\t\tthis.showSpin = false;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.finally(function() {\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t}.bind(this));\r\n\t\t\t},\r\n\r\n\t\t\tqueryTransferInfo(ddiNo, shopNo) {\r\n\t\t\t\tthis.showSpin = true;\r\n\r\n\t\t\t\tthis.axios({\r\n\t\t\t\t\t\tmethod: \"get\",\r\n\t\t\t\t\t\turl: \"/rainbow/jqsxxx_transfer_list\",\r\n\t\t\t\t\t\tparams: {\r\n\t\t\t\t\t\t\tfilterMap: {\r\n\t\t\t\t\t\t\t\tddiNo: ddiNo,\r\n\t\t\t\t\t\t\t\tshopValue: shopNo,\r\n\t\t\t\t\t\t\t\tstartDate: this.dateValue[0],\r\n\t\t\t\t\t\t\t\tendDate: this.dateValue[1]\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.then(\r\n\t\t\t\t\t\tfunction(response) {\r\n\t\t\t\t\t\t\tconsole.log(JSON.stringify(response))\r\n\r\n\t\t\t\t\t\t\tthis.transferInfo = response.data.data;\r\n\r\n\t\t\t\t\t\t}.bind(this)\r\n\t\t\t\t\t)\r\n\t\t\t\t\t.catch(function(error) {\r\n\t\t\t\t\t\talert(error);\r\n\t\t\t\t\t\tthis.showSpin = false;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.finally(function() {\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t}.bind(this));\r\n\t\t\t},\r\n\r\n\r\n\t\t\t/*分页点击事件*/\r\n\t\t\tpageSearch(e) {\r\n\t\t\t\tthis.pageInfo.page = e - 1;\r\n\t\t\t\tthis.getDataList({\r\n\t\t\t\t\tpageInfo: this.pageInfo\r\n\t\t\t\t});\r\n\t\t\t},\r\n\r\n\t\t\t// 改变每页显示条数时触发\r\n\t\t\tpageSizeChange(e) {\r\n\t\t\t\tthis.pageInfo.pageSize = e;\r\n\t\t\t\tthis.pageInfo.page = 0;\r\n\t\t\t\tthis.getDataList({\r\n\t\t\t\t\tpageInfo: this.pageInfo\r\n\t\t\t\t});\r\n\t\t\t},\r\n\r\n\t\t\thandleDateChange(daterange) {\r\n\t\t\t\tthis.dateValue = daterange;\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\tcloseSpin() {\r\n\t\t\t\tconsole.log(\"============================================\")\r\n\t\t\t\tthis.showSpin = false;\r\n\t\t\t}, \r\n\r\n\t\t}\r\n\r\n\t};\r\n</script>\n"],"sourceRoot":"src/views/rainbow/djqdatj"}]}