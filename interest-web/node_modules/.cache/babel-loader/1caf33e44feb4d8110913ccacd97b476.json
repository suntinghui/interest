{"remainingRequest":"E:\\workspace\\javaEE\\interest\\interest-web\\node_modules\\thread-loader\\dist\\cjs.js!E:\\workspace\\javaEE\\interest\\interest-web\\node_modules\\babel-loader\\lib\\index.js!E:\\workspace\\javaEE\\interest\\interest-web\\src\\store\\modules\\UsersModule.js","dependencies":[{"path":"E:\\workspace\\javaEE\\interest\\interest-web\\src\\store\\modules\\UsersModule.js","mtime":1568974424542},{"path":"E:\\workspace\\javaEE\\interest\\interest-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\workspace\\javaEE\\interest\\interest-web\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\workspace\\javaEE\\interest\\interest-web\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import axios from \"axios\";\nimport iView from \"iview\";\nexport default {\n  namespaced: true,\n  state: {\n    currentUser: {\n      get UserName() {\n        return localStorage.getItem(\"currentUser_name\");\n      },\n\n      get UserToken() {\n        return localStorage.getItem(\"currentUser_token\");\n      },\n\n      get RefreshToken() {\n        return localStorage.getItem(\"currentUser_refresh_token\");\n      }\n\n    }\n  },\n  mutations: {\n    setUser: function setUser(state, _ref) {\n      var user_name = _ref.user_name,\n          user_token = _ref.user_token,\n          refresh_token = _ref.refresh_token;\n      // 在这里把用户名和token保存起来\n      localStorage.setItem(\"currentUser_name\", user_name);\n      localStorage.setItem(\"currentUser_token\", user_token);\n      localStorage.setItem(\"currentUser_refresh_token\", refresh_token);\n    },\n    clearUser: function clearUser(state) {\n      localStorage.clear();\n    }\n  },\n  actions: {\n    userLogin: function userLogin(context, _ref2) {\n      var user_name = _ref2.user_name,\n          user_password = _ref2.user_password,\n          router = _ref2.router;\n      axios({\n        method: \"post\",\n        url: \"/oauth/token\",\n        params: {\n          username: user_name,\n          password: user_password,\n          grant_type: \"password\",\n          scope: \"all\"\n        },\n        auth: {\n          username: \"client\",\n          password: \"secret\"\n        }\n      }).then(function (response) {\n        /*console.log(response.data);*/\n        context.commit(\"setUser\", {\n          user_name: user_name,\n          user_token: response.data.access_token,\n          refresh_token: response.data.refresh_token\n        });\n        /*router.push({path:\"base\"});*/\n\n        axios.defaults.headers.common[\"Authorization\"] = \"bearer \" + localStorage.getItem(\"currentUser_token\"); //router.push({ path: \"/page/home\" });\n\n        router.push({\n          path: \"/base\"\n        });\n        context.commit(\"setSignFalse\", null, {\n          root: true\n        });\n        /*this.$route.router.push({ path: '/base' });*/\n      }).catch(function (error) {\n        alert(JSON.stringify(error));\n        /*iView.Message.error('用户名或密码错误！');*/\n\n        context.commit(\"setSignTrue\", null, {\n          root: true\n        });\n      });\n    },\n    loginOUt: function loginOUt(context, _ref3) {\n      var router = _ref3.router;\n      router.push({\n        path: \"/login\"\n      });\n      location.reload();\n      context.commit(\"clearUser\");\n    }\n  }\n};",{"version":3,"sources":["E:\\workspace\\javaEE\\interest\\interest-web\\src\\store\\modules\\UsersModule.js"],"names":["axios","iView","namespaced","state","currentUser","UserName","localStorage","getItem","UserToken","RefreshToken","mutations","setUser","user_name","user_token","refresh_token","setItem","clearUser","clear","actions","userLogin","context","user_password","router","method","url","params","username","password","grant_type","scope","auth","then","response","commit","data","access_token","defaults","headers","common","push","path","root","catch","error","alert","JSON","stringify","loginOUt","location","reload"],"mappings":"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","sourcesContent":["import axios from \"axios\";\r\nimport iView from \"iview\";\r\n\r\nexport default {\r\n  namespaced: true,\r\n  state: {\r\n    currentUser: {\r\n      get UserName() {\r\n        return localStorage.getItem(\"currentUser_name\");\r\n      },\r\n      get UserToken() {\r\n        return localStorage.getItem(\"currentUser_token\");\r\n      },\r\n      get RefreshToken() {\r\n        return localStorage.getItem(\"currentUser_refresh_token\");\r\n      }\r\n    }\r\n  },\r\n  mutations: {\r\n    setUser(state, { user_name, user_token, refresh_token }) {\r\n      // 在这里把用户名和token保存起来\r\n      localStorage.setItem(\"currentUser_name\", user_name);\r\n      localStorage.setItem(\"currentUser_token\", user_token);\r\n      localStorage.setItem(\"currentUser_refresh_token\", refresh_token);\r\n    },\r\n    clearUser(state) {\r\n      localStorage.clear();\r\n    }\r\n  },\r\n  actions: {\r\n    userLogin(context, { user_name, user_password, router }) {\r\n      axios({\r\n        method: \"post\",\r\n        url: \"/oauth/token\",\r\n        params: {\r\n          username: user_name,\r\n          password: user_password,\r\n          grant_type: \"password\",\r\n          scope: \"all\"\r\n        },\r\n        auth: {\r\n          username: \"client\",\r\n          password: \"secret\"\r\n        }\r\n      })\r\n        .then(function(response) {\r\n          /*console.log(response.data);*/\r\n          context.commit(\"setUser\", {\r\n            user_name: user_name,\r\n            user_token: response.data.access_token,\r\n            refresh_token: response.data.refresh_token\r\n          });\r\n          /*router.push({path:\"base\"});*/\r\n          axios.defaults.headers.common[\"Authorization\"] =\r\n            \"bearer \" + localStorage.getItem(\"currentUser_token\");\r\n          //router.push({ path: \"/page/home\" });\r\n\t\t  router.push({ path: \"/base\" });\r\n          context.commit(\"setSignFalse\", null, { root: true });\r\n          /*this.$route.router.push({ path: '/base' });*/\r\n        })\r\n        .catch(function(error) {\r\n\t\t\talert(JSON.stringify(error))\r\n          /*iView.Message.error('用户名或密码错误！');*/\r\n          context.commit(\"setSignTrue\", null, { root: true });\r\n        });\r\n    },\r\n    loginOUt(context, { router }) {\r\n      router.push({ path: \"/login\" });\r\n      location.reload();\r\n      context.commit(\"clearUser\");\r\n    }\r\n  }\r\n};\r\n"]}]}