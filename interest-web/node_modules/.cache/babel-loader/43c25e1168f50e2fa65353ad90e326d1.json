{"remainingRequest":"E:\\workspace\\javaEE\\interest\\interest-web\\node_modules\\babel-loader\\lib\\index.js!E:\\workspace\\javaEE\\interest\\interest-web\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!E:\\workspace\\javaEE\\interest\\interest-web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\workspace\\javaEE\\interest\\interest-web\\src\\views\\template\\user-info.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\workspace\\javaEE\\interest\\interest-web\\src\\views\\template\\user-info.vue","mtime":1568861049963},{"path":"E:\\workspace\\javaEE\\interest\\interest-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\workspace\\javaEE\\interest\\interest-web\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\workspace\\javaEE\\interest\\interest-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\workspace\\javaEE\\interest\\interest-web\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport myUpload from 'vue-image-crop-upload';\nexport default {\n  components: {\n    'my-upload': myUpload\n  },\n  data: function data() {\n    return {\n      headImg: '',\n      show: false,\n      headers: {\n        Authorization: 'bearer ' + localStorage.getItem(\"currentUser_token\")\n      },\n      userInfo: {\n        headimg: null,\n        name: null,\n        url: null,\n        email: null,\n        info: null,\n        location: null,\n        skill: null\n      }\n    };\n  },\n  mounted: function mounted() {\n    this.getUserInfo();\n  },\n  methods: {\n    toggleShow: function toggleShow() {\n      this.show = !this.show;\n    },\n    cropUploadSuccess: function cropUploadSuccess(jsonData, field) {\n      this.axios({\n        method: \"patch\",\n        url: \"/general/users/user/headImg\",\n        params: {\n          headImg: jsonData.data\n        }\n      }).then(function (response) {\n        this.headImg = jsonData.data;\n        this.show = false;\n        this.$Notice.success({\n          title: '头像修改成功'\n        });\n        this.$refs.upload.off();\n      }.bind(this)).catch(function (error) {\n        alter(error);\n      }.bind(this));\n    },\n    cropUploadFail: function cropUploadFail(status, field) {\n      this.$Notice.error({\n        title: '头像修改失败'\n      });\n      this.$refs.upload.off();\n    },\n    userInfoSet: function userInfoSet(e) {\n      this.userInfo.headimg = e.headimg;\n      this.userInfo.name = e.name;\n      this.userInfo.url = e.url;\n      this.userInfo.email = e.email;\n      this.userInfo.info = e.info;\n      this.userInfo.location = e.location;\n      this.userInfo.skill = e.skill;\n    },\n    getUserInfo: function getUserInfo() {\n      this.axios({\n        method: \"get\",\n        url: \"/general/users/user/info\"\n      }).then(function (response) {\n        this.userInfoSet(response.data.data);\n        this.headImg = response.data.data.headimg;\n      }.bind(this)).catch(function (error) {\n        alter(error);\n      }.bind(this));\n    },\n    updateInfo: function updateInfo() {\n      this.axios({\n        method: \"put\",\n        url: \"/general/users/user/info\",\n        data: this.userInfo\n      }).then(function (response) {\n        this.$Notice.success({\n          title: '修改成功'\n        });\n      }.bind(this)).catch(function (error) {\n        alter(error);\n      }.bind(this));\n    }\n  }\n};",{"version":3,"sources":["user-info.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiDA,OAAA,QAAA,MAAA,uBAAA;AACA,eAAA;AACA,EAAA,UAAA,EAAA;AACA,iBAAA;AADA,GADA;AAIA,EAAA,IAJA,kBAIA;AACA,WAAA;AACA,MAAA,OAAA,EAAA,EADA;AAEA,MAAA,IAAA,EAAA,KAFA;AAGA,MAAA,OAAA,EAAA;AACA,QAAA,aAAA,EAAA,YAAA,YAAA,CAAA,OAAA,CAAA,mBAAA;AADA,OAHA;AAMA,MAAA,QAAA,EAAA;AACA,QAAA,OAAA,EAAA,IADA;AAEA,QAAA,IAAA,EAAA,IAFA;AAGA,QAAA,GAAA,EAAA,IAHA;AAIA,QAAA,KAAA,EAAA,IAJA;AAKA,QAAA,IAAA,EAAA,IALA;AAMA,QAAA,QAAA,EAAA,IANA;AAOA,QAAA,KAAA,EAAA;AAPA;AANA,KAAA;AAgBA,GArBA;AAsBA,EAAA,OAtBA,qBAsBA;AACA,SAAA,WAAA;AACA,GAxBA;AAyBA,EAAA,OAAA,EAAA;AACA,IAAA,UADA,wBACA;AACA,WAAA,IAAA,GAAA,CAAA,KAAA,IAAA;AACA,KAHA;AAIA,IAAA,iBAJA,6BAIA,QAJA,EAIA,KAJA,EAIA;AACA,WAAA,KAAA,CAAA;AACA,QAAA,MAAA,EAAA,OADA;AAEA,QAAA,GAAA,EAAA,6BAFA;AAGA,QAAA,MAAA,EAAA;AACA,UAAA,OAAA,EAAA,QAAA,CAAA;AADA;AAHA,OAAA,EAOA,IAPA,CAOA,UAAA,QAAA,EAAA;AACA,aAAA,OAAA,GAAA,QAAA,CAAA,IAAA;AACA,aAAA,IAAA,GAAA,KAAA;AACA,aAAA,OAAA,CAAA,OAAA,CAAA;AAAA,UAAA,KAAA,EAAA;AAAA,SAAA;AACA,aAAA,KAAA,CAAA,MAAA,CAAA,GAAA;AACA,OALA,CAKA,IALA,CAKA,IALA,CAPA,EAaA,KAbA,CAaA,UAAA,KAAA,EAAA;AACA,QAAA,KAAA,CAAA,KAAA,CAAA;AACA,OAFA,CAEA,IAFA,CAEA,IAFA,CAbA;AAgBA,KArBA;AAsBA,IAAA,cAtBA,0BAsBA,MAtBA,EAsBA,KAtBA,EAsBA;AACA,WAAA,OAAA,CAAA,KAAA,CAAA;AAAA,QAAA,KAAA,EAAA;AAAA,OAAA;AACA,WAAA,KAAA,CAAA,MAAA,CAAA,GAAA;AACA,KAzBA;AA0BA,IAAA,WA1BA,uBA0BA,CA1BA,EA0BA;AACA,WAAA,QAAA,CAAA,OAAA,GAAA,CAAA,CAAA,OAAA;AACA,WAAA,QAAA,CAAA,IAAA,GAAA,CAAA,CAAA,IAAA;AACA,WAAA,QAAA,CAAA,GAAA,GAAA,CAAA,CAAA,GAAA;AACA,WAAA,QAAA,CAAA,KAAA,GAAA,CAAA,CAAA,KAAA;AACA,WAAA,QAAA,CAAA,IAAA,GAAA,CAAA,CAAA,IAAA;AACA,WAAA,QAAA,CAAA,QAAA,GAAA,CAAA,CAAA,QAAA;AACA,WAAA,QAAA,CAAA,KAAA,GAAA,CAAA,CAAA,KAAA;AACA,KAlCA;AAmCA,IAAA,WAnCA,yBAmCA;AACA,WAAA,KAAA,CAAA;AACA,QAAA,MAAA,EAAA,KADA;AAEA,QAAA,GAAA,EAAA;AAFA,OAAA,EAIA,IAJA,CAKA,UAAA,QAAA,EAAA;AACA,aAAA,WAAA,CAAA,QAAA,CAAA,IAAA,CAAA,IAAA;AACA,aAAA,OAAA,GAAA,QAAA,CAAA,IAAA,CAAA,IAAA,CAAA,OAAA;AACA,OAHA,CAGA,IAHA,CAGA,IAHA,CALA,EAUA,KAVA,CAWA,UAAA,KAAA,EAAA;AACA,QAAA,KAAA,CAAA,KAAA,CAAA;AACA,OAFA,CAEA,IAFA,CAEA,IAFA,CAXA;AAeA,KAnDA;AAoDA,IAAA,UApDA,wBAoDA;AACA,WAAA,KAAA,CAAA;AACA,QAAA,MAAA,EAAA,KADA;AAEA,QAAA,GAAA,EAAA,0BAFA;AAGA,QAAA,IAAA,EAAA,KAAA;AAHA,OAAA,EAKA,IALA,CAMA,UAAA,QAAA,EAAA;AACA,aAAA,OAAA,CAAA,OAAA,CAAA;AAAA,UAAA,KAAA,EAAA;AAAA,SAAA;AACA,OAFA,CAEA,IAFA,CAEA,IAFA,CANA,EAUA,KAVA,CAWA,UAAA,KAAA,EAAA;AACA,QAAA,KAAA,CAAA,KAAA,CAAA;AACA,OAFA,CAEA,IAFA,CAEA,IAFA,CAXA;AAeA;AApEA;AAzBA,CAAA","sourcesContent":["<template>\r\n    <div class=\"home content-background\">\r\n    \t<div class=\"user-content\">\r\n    \t\t<div class=\"subhead\">\r\n    \t\t\t<h1 class=\"title-text\">个人信息</h1>\r\n    \t\t</div>\r\n    \t\t<div class=\"headimg\" @click=\"toggleShow()\">\r\n    \t\t\t<img :src=\"headImg\">\r\n          <p class=\"head-btn\">修改头像</p>\r\n    \t\t</div>\r\n    \t\t<div class=\"info\">\r\n    \t\t\t<Form :model=\"userInfo\" label-position=\"top\">\r\n\t\t\t        <FormItem label=\"用户名\">\r\n\t\t\t            <Input v-model=\"userInfo.name\"></Input>\r\n\t\t\t        </FormItem>\r\n\t\t\t        <FormItem label=\"用户主页\">\r\n\t\t\t            <Input v-model=\"userInfo.url\"></Input>\r\n\t\t\t        </FormItem>\r\n\t\t\t        <FormItem label=\"邮箱地址\">\r\n\t\t\t            <Input v-model=\"userInfo.email\"></Input>\r\n\t\t\t        </FormItem>\r\n\t\t\t        <FormItem label=\"个人简介\">\r\n\t\t\t            <Input v-model=\"userInfo.info\" type=\"textarea\" :rows=\"3\"></Input>\r\n\t\t\t        </FormItem>\r\n\t\t\t        <FormItem label=\"所在位置\">\r\n\t\t\t            <Input v-model=\"userInfo.location\"></Input>\r\n\t\t\t        </FormItem>\r\n\t\t\t        <FormItem label=\"擅长技能\">\r\n\t\t\t            <Input v-model=\"userInfo.skill\"></Input>\r\n\t\t\t        </FormItem>\r\n\t\t\t        <Button type=\"primary\" class=\"update-button\" @click=\"updateInfo\">更新</Button>\r\n\t\t\t    </Form>\r\n    \t\t</div>\r\n    \t</div>\r\n      <my-upload \r\n        ref=\"upload\"\r\n        field=\"picture\"\r\n        v-model=\"show\"\r\n        :width=\"200\"\r\n        :height=\"200\"\r\n        url=\"/interest/general/users/user/head-img/upload\"\r\n        :headers=\"headers\"\r\n        img-format=\"png\"\r\n        @crop-upload-success=\"cropUploadSuccess\"\r\n        @crop-upload-fail=\"cropUploadFail\">\r\n      </my-upload>\r\n    </div>\r\n</template>\r\n<script>\r\nimport myUpload from 'vue-image-crop-upload';\r\nexport default {\r\n  components: {\r\n    'my-upload': myUpload\r\n  },\r\n  data() {\r\n    return {\r\n      headImg:'',\r\n      show: false,\r\n      headers: {\r\n        Authorization:'bearer '+ localStorage.getItem(\"currentUser_token\")\r\n      },\r\n    \tuserInfo: {\r\n    \t\theadimg:null,\r\n    \t\tname:null,\r\n    \t\turl:null,\r\n    \t\temail:null,\r\n    \t\tinfo:null,\r\n    \t\tlocation:null,\r\n    \t\tskill:null\r\n    \t}\r\n    };\r\n  },\r\n  mounted() {\r\n  \tthis.getUserInfo();\r\n  },\r\n  methods: {\r\n    toggleShow() {\r\n      this.show = !this.show;\r\n    },\r\n    cropUploadSuccess(jsonData, field){\r\n      this.axios({\r\n        method: \"patch\",\r\n        url: \"/general/users/user/headImg\",\r\n        params: {\r\n          headImg: jsonData.data\r\n        }\r\n      })\r\n      .then(function(response) {\r\n        this.headImg = jsonData.data;\r\n        this.show = false;\r\n        this.$Notice.success({title: '头像修改成功'});\r\n        this.$refs.upload.off();\r\n      }.bind(this))\r\n      .catch(function(error) {\r\n        alter(error);\r\n      }.bind(this));\r\n    },\r\n    cropUploadFail(status, field){\r\n      this.$Notice.error({title: '头像修改失败'});\r\n      this.$refs.upload.off();\r\n    },\r\n  \tuserInfoSet(e){\r\n  \t\tthis.userInfo.headimg = e.headimg;\r\n  \t\tthis.userInfo.name = e.name;\r\n  \t\tthis.userInfo.url = e.url;\r\n  \t\tthis.userInfo.email = e.email;\r\n  \t\tthis.userInfo.info = e.info;\r\n  \t\tthis.userInfo.location = e.location;\r\n  \t\tthis.userInfo.skill = e.skill;\r\n  \t},\r\n  \tgetUserInfo(){\r\n  \t\tthis.axios({\r\n\t        method: \"get\",\r\n\t        url: \"/general/users/user/info\"\r\n\t    })\r\n\t    .then(\r\n          function(response) {\r\n            this.userInfoSet(response.data.data);\r\n            this.headImg = response.data.data.headimg;\r\n          }.bind(this)\r\n        )\r\n        .catch(\r\n          function(error) {\r\n            alter(error);\r\n          }.bind(this)\r\n        );\r\n  \t},\r\n  \tupdateInfo(){\r\n  \t\tthis.axios({\r\n  \t\t\tmethod: \"put\",\r\n  \t\t\turl: \"/general/users/user/info\",\r\n  \t\t\tdata: this.userInfo\r\n  \t\t})\r\n  \t\t.then(\r\n          function(response) {\r\n            this.$Notice.success({title: '修改成功'});\r\n          }.bind(this)\r\n        )\r\n        .catch(\r\n          function(error) {\r\n            alter(error);\r\n          }.bind(this)\r\n        );\r\n  \t}\r\n  }\r\n};\r\n</script>\r\n<style>\r\n.ivu-form .ivu-form-item-label {\r\n\tcolor: #24292e;\r\n}\r\n.content-background {\r\n  background: #fff;\r\n}\r\n.user-content {\r\n\twidth: 550px;\r\n\tmargin:0 auto;\r\n\theight: 625px;\r\n}\r\n.user-content .subhead {\r\n    border-bottom: 1px solid #e1e4e8;\r\n    padding-bottom: 8px;\r\n    text-align: center;\r\n}\r\n.user-content .title-text {\r\n\tcolor: #24292e;\r\n}\r\n.user-content .info {\r\n\tpadding:16px 16px;\r\n\tfloat: left;\r\n    width: 400px;\r\n    color: #24292e;\r\n}\r\n.user-content .info label {\r\n\tcolor: #24292e;\r\n}\r\n.user-content .headimg {\r\n\tfloat: left;\r\n\tmargin-top: 16px;\r\n  padding: 0 16px;\r\n  cursor: pointer;\r\n}\r\n.user-content .headimg img {\r\n\twidth: 100px;\r\n    height: 100px;\r\n    border-radius: 50%;\r\n    margin: 0 auto;\r\n}\r\n.user-content .update-button {\r\n\twidth: 100%;\r\n}\r\n.head-btn {\r\n  padding: 5px 15px 6px;\r\n  font-size: 12px;\r\n  border-radius: 4px;\r\n  color: #47cb89;\r\n  text-align: center;\r\n  border: 1px solid #47cb89;\r\n}\r\n.head-btn:hover{\r\n  background: rgba(244,252,248,.5);\r\n}\r\n</style>\r\n"],"sourceRoot":"src/views/template"}]}