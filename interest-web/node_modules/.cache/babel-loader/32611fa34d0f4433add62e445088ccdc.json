{"remainingRequest":"E:\\workspace\\javaEE\\interest\\interest-web\\node_modules\\babel-loader\\lib\\index.js!E:\\workspace\\javaEE\\interest\\interest-web\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!E:\\workspace\\javaEE\\interest\\interest-web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\workspace\\javaEE\\interest\\interest-web\\src\\views\\article\\pc\\article-detail.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\workspace\\javaEE\\interest\\interest-web\\src\\views\\article\\pc\\article-detail.vue","mtime":1568861049869},{"path":"E:\\workspace\\javaEE\\interest\\interest-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\workspace\\javaEE\\interest\\interest-web\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\workspace\\javaEE\\interest\\interest-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\workspace\\javaEE\\interest\\interest-web\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nexport default {\n  data: function data() {\n    return {\n      articleId: null,\n      article: {\n        id: \"\",\n        title: \"\",\n        content: \"\",\n        clickRate: \"\",\n        commentCount: \"\",\n        createTime: \"\",\n        userid: \"\",\n        userName: \"\",\n        userHeadImg: \"\",\n        githuburl: \"\"\n      },\n      comments: [],\n      page: 0,\n      pageSize: 10,\n      total: 0,\n      commentAppend: '',\n      commentAppendInput: 1,\n      appendActive: false,\n      articleComment: {\n        articleid: null,\n        articleOwnerId: null,\n        parentid: null,\n        comment: null,\n        replierId: null,\n        replierName: null\n      }\n    };\n  },\n  mounted: function mounted() {\n    this.articleId = this.$route.params.id;\n    this.getArticle(this.$route.params.id);\n    this.getComments();\n  },\n  methods: {\n    getArticle: function getArticle(e) {\n      this.axios({\n        method: \"get\",\n        url: \"/public/articles/article/\" + e\n      }).then(function (response) {\n        this.articleSet(response.data.data);\n      }.bind(this)).catch(function (error) {}.bind(this));\n    },\n    articleSet: function articleSet(e) {\n      this.article.id = e.id;\n      this.article.title = e.title;\n      this.article.content = e.content;\n      this.article.clickRate = e.clickRate;\n      this.article.commentCount = e.commentCount;\n      this.article.createTime = this.dateGet(e.createTime);\n      this.article.userid = e.userid;\n      this.article.userName = e.userName;\n      this.article.userHeadImg = e.userHeadImg;\n      this.article.githuburl = e.githuburl;\n    },\n    articleCommentSet: function articleCommentSet(e) {\n      this.articleComment.articleid = e.articleid;\n      this.articleComment.parentid = e.parentid;\n      this.articleComment.comment = e.comment;\n      this.articleComment.replierId = e.replierId;\n      this.articleComment.replierName = e.replierName;\n      this.articleComment.articleOwnerId = this.article.userid;\n    },\n    articleCommentInit: function articleCommentInit() {\n      this.articleComment.articleid = null;\n      this.articleComment.parentid = null;\n      this.articleComment.comment = null;\n      this.articleComment.replierId = null;\n      this.articleComment.replierName = null;\n      this.articleComment.articleOwnerId = null;\n    },\n    getComments: function getComments() {\n      this.axios({\n        method: 'get',\n        url: '/public/article/comment',\n        params: {\n          articleId: this.articleId,\n          page: this.page,\n          pageSize: this.pageSize\n        }\n      }).then(function (response) {\n        var data = response.data.data;\n        var _iteratorNormalCompletion = true;\n        var _didIteratorError = false;\n        var _iteratorError = undefined;\n\n        try {\n          for (var _iterator = data.data[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n            var comment = _step.value;\n            comment.creatTimeBy = this.latestTimeFormat(comment.createTime);\n            comment.showContent = false;\n            var _iteratorNormalCompletion2 = true;\n            var _didIteratorError2 = false;\n            var _iteratorError2 = undefined;\n\n            try {\n              for (var _iterator2 = comment.childComments[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n                var replyComment = _step2.value;\n                replyComment.creatTimeBy = this.latestTimeFormat(replyComment.createTime);\n              }\n            } catch (err) {\n              _didIteratorError2 = true;\n              _iteratorError2 = err;\n            } finally {\n              try {\n                if (!_iteratorNormalCompletion2 && _iterator2.return != null) {\n                  _iterator2.return();\n                }\n              } finally {\n                if (_didIteratorError2) {\n                  throw _iteratorError2;\n                }\n              }\n            }\n          }\n        } catch (err) {\n          _didIteratorError = true;\n          _iteratorError = err;\n        } finally {\n          try {\n            if (!_iteratorNormalCompletion && _iterator.return != null) {\n              _iterator.return();\n            }\n          } finally {\n            if (_didIteratorError) {\n              throw _iteratorError;\n            }\n          }\n        }\n\n        this.comments = data.data;\n        this.total = data.totalCount;\n      }.bind(this)).catch(function (error) {}.bind(this));\n    },\n    focusInput: function focusInput(event) {\n      this.commentAppendInput = 3;\n    },\n    writeComment: function writeComment(e, sign) {\n      this.commentAppendInput = 3;\n      var anchor = this.$el.querySelector(\"#commentAppendArea\");\n      document.body.scrollTop = anchor.offsetTop; // chrome\n\n      this.appendActive = true; //document.documentElement.scrollTop = anchor.offsetTop; // firefox\n\n      if (sign == 1) {\n        this.articleComment.articleid = this.articleId;\n        this.articleComment.parentid = e.id;\n        this.articleComment.comment = null;\n        this.articleComment.replierId = e.userid;\n        this.articleComment.replierName = e.userName;\n      } else if (sign == 2) {\n        this.articleComment.articleid = this.articleId;\n        this.articleComment.parentid = e.parentid;\n        this.articleComment.comment = null;\n        this.articleComment.replierId = e.userid;\n        this.articleComment.replierName = e.userName;\n      }\n\n      this.commentAppend = \"[reply]\" + e.userName + \"[/reply]\\n\";\n    },\n    publishComment: function publishComment() {\n      if (this.axios.defaults.headers.common[\"Authorization\"] == null || this.axios.defaults.headers.common[\"Authorization\"] == \"\") {\n        this.$Message.error('请登录');\n        return;\n      }\n\n      if (this.commentAppend == null || this.commentAppend == '') {\n        this.$Message.error('请输入评论');\n        return;\n      }\n\n      if (this.articleComment.replierName != null) {\n        var str = this.commentAppend.substring(0, 15 + this.articleComment.replierName.length);\n        var validate = \"[reply]\" + this.articleComment.replierName + \"[/reply]\";\n\n        if (str == validate) {\n          this.articleComment.comment = this.commentAppend.substring(str.length);\n          this.articleComment.articleOwnerId = this.article.userid;\n          this.postComment(this.articleComment);\n        } else {\n          this.postComment({\n            articleid: this.articleId,\n            comment: this.commentAppend,\n            articleOwnerId: this.article.userid\n          });\n        }\n      } else {\n        this.postComment({\n          articleid: this.articleId,\n          comment: this.commentAppend,\n          articleOwnerId: this.article.userid\n        });\n      }\n    },\n    postComment: function postComment(e) {\n      this.axios({\n        method: 'post',\n        url: '/article/comment',\n        data: e\n      }).then(function (response) {\n        this.$Message.success('评论成功');\n        this.getComments();\n        this.articleCommentInit();\n        this.commentAppend = null;\n      }.bind(this)).catch(function () {\n        this.$Message.error('评论失败，请稍后重试！');\n      }.bind(this));\n    },\n    changeContent: function changeContent(index) {\n      var temp = this.comments[index];\n      temp.showContent = !temp.showContent;\n      this.comments.splice(index, 1, temp);\n    },\n    pageSearch: function pageSearch(e) {\n      this.page = e - 1;\n      this.getComments();\n    }\n  }\n};",{"version":3,"sources":["article-detail.vue"],"names":[],"mappings":"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","sourcesContent":["<style scoped lang=\"scss\">\r\n    .article {\r\n        width: 100%;\r\n        background: #fff;\r\n        margin-bottom: 20px;\r\n    }\r\n\r\n    .title {\r\n        color: black;\r\n    }\r\n\r\n    .list-user-other {\r\n        margin: 10px 0px;\r\n        height: 24px;\r\n        line-height: 24px;\r\n    }\r\n\r\n    .list-user-other dt {\r\n        float: left;\r\n        margin: 0 6px 0 0;\r\n    }\r\n\r\n    .list-user-other dd {\r\n        float: left;\r\n        font-size: 14px;\r\n        color: #8a8a8a;\r\n        line-height: 24px;\r\n        margin-right: 10px;\r\n    }\r\n\r\n    .list-user-other .text {\r\n        margin-right: 4px;\r\n        color: #8a8a8a;\r\n    }\r\n\r\n    .list-user-other .num {\r\n        color: #3399ea;\r\n    }\r\n\r\n    .content {\r\n        overflow: hidden;\r\n    }\r\n    .content img{\r\n        max-width: 100%;\r\n    }\r\n\r\n    .comment-section {\r\n        flex-direction: column;\r\n        margin-top: 5px;\r\n        background-color: #fff;\r\n        overflow: hidden;\r\n\r\n        ul {\r\n            list-style: none;\r\n        }\r\n\r\n        image {\r\n            margin-right: 10px;\r\n            border-radius: 6px;\r\n\r\n        }\r\n\r\n        .avatar {\r\n            margin-right: 6px;\r\n            border-radius: 20px;\r\n            width: 26px;\r\n            height: 26px;\r\n        }\r\n\r\n        .reply-count {\r\n            padding: 12px 15px;\r\n            background-color: #eee;\r\n        }\r\n\r\n        .reply-list {\r\n            display: flex;\r\n            flex-direction: column;\r\n\r\n            .reply-item {\r\n                display: flex;\r\n                padding: 12px 15px;\r\n                border-bottom: 1px solid #f0f0f0;\r\n                flex-direction: column;\r\n\r\n                .user {\r\n                    flex: 0 0 26px;\r\n\r\n                    .avatar {\r\n                        margin-right: 6px;\r\n                        border-radius: 20px;\r\n                        width: 26px;\r\n                        height: 26px;\r\n                        float: left;\r\n                    }\r\n                    .title-info {\r\n                        font-size: 12px;\r\n                        float:left;\r\n                        margin-top: 4px;\r\n\r\n                        .user-name {\r\n                            margin: 0 4px;\r\n                            color: #666;\r\n\r\n                            &:hover {\r\n                                color: #385f8a;\r\n                            }\r\n                        }\r\n                    }\r\n                    .title-info-other {\r\n                        font-size: 12px;\r\n                        float:left;\r\n                        margin: 4px 0 0 20px;\r\n\r\n                        a {\r\n                            margin: 0 5px;\r\n                        }\r\n                    }\r\n                }\r\n                .reply-child-list {\r\n                    margin-left: 32px;\r\n                    border-left: 4px solid #c5c5c5;\r\n\r\n                    .title-info {\r\n                        font-size: 12px;\r\n                        float:left;\r\n                        margin-top: 4px;\r\n\r\n                        .user-name {\r\n                            margin: 0 4px;\r\n                            color: #666;\r\n\r\n                            &:hover {\r\n                                color: #385f8a;\r\n                            }\r\n                        }\r\n                        .avatar {\r\n                            margin-right: 6px;\r\n                            border-radius: 20px;\r\n                            width: 26px;\r\n                            height: 26px;\r\n                            float: left;\r\n                        }\r\n                        .title-info-right {\r\n                            float: left;\r\n                            margin-top: 4px;\r\n\r\n                            .reply-time {\r\n                                padding: 0 20px;\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n\r\n            .reply-hightlight {\r\n                background-color: #f4fcf0;\r\n            }\r\n\r\n            .reply-info {\r\n                display: flex;\r\n                flex-direction: column;\r\n\r\n                text {\r\n                    margin-left: 20px;\r\n                }\r\n            }\r\n\r\n            .up-info {\r\n                flex-grow: 1;\r\n                justify-content: flex-end;\r\n                color: #808080;\r\n\r\n                image {\r\n                    width: 50px;\r\n                    height: 50px;\r\n                }\r\n\r\n                .up-count {\r\n                    margin-left: 0;\r\n                }\r\n\r\n            }\r\n        }\r\n\r\n        .reply-content {\r\n            padding: 10px 20px 0 0;\r\n            font-size: 14px;\r\n        }\r\n\r\n        .pagin {\r\n            margin: 10px 15px;\r\n        }\r\n    }\r\n\r\n</style>\r\n<template>\r\n    <div id=\"mywork\">\r\n        <div class=\"page-header-main\">\r\n            <div class=\"width-80 margin-auto margin-top-2 flex-direction-column flex-justify-center flex-items-center\">\r\n                <div class=\"article\">\r\n                    <div class=\"ql-container ql-snow\">\r\n                        <div class=\"ql-editor\">\r\n                            <div class=\"title line-height-40 font-size-22\">{{article.title}}</div>\r\n                            <dl class=\"list-user-other\">\r\n                                <dt>\r\n                                    <a :href=\"$store.state.userUrlPre+article.userid\" target=\"_blank\">\r\n                                        <img :src=\"article.userHeadImg\"\r\n                                             style=\"width: 25px;height: 25px;border-radius: 100%;\">\r\n                                    </a>\r\n                                </dt>\r\n                                <dd>\r\n                                    <a :href=\"$store.state.userUrlPre+article.userid\" target=\"_blank\">{{article.userName}}</a>\r\n                                </dd>\r\n                                <dd>\r\n                                    <span class=\"text\">阅读数:</span>\r\n                                    <span class=\"num\">{{article.clickRate}}</span>\r\n                                </dd>\r\n                                <dd>{{article.createTime}}</dd>\r\n                            </dl>\r\n                            <div class=\"box-flex width-100 margin-auto margin-top-1 margin-bottom-1 border-top border-color-bfbfbf\"></div>\r\n                            <div class=\"content\" v-html=\"article.content\"></div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                <div class=\"comment-append-section\" id=\"commentAppendArea\">\r\n                    <!-- <Input v-model=\"commentAppend\" v-show=\"!appendActive\" @on-focus=\"toggleInput\"\r\n                            prefix=\"ios-create\" placeholder=\"添加评论\" />\r\n\r\n                    <Input v-show=\"appendActive\" v-model=\"commentAppend\"\r\n                           @on-blur=\"toggleInput\" ref=\"commentInputDom\"\r\n                           type=\"textarea\" :autosize=\"{minRows: 3,maxRows: 10}\" placeholder=\"添加评论\" /> -->\r\n                    <Input v-model=\"commentAppend\" @on-blur=\"toggleInput\" @on-focus=\"focusInput\" ref=\"commentInputDom\" type=\"textarea\" :rows=\"commentAppendInput\" placeholder=\"添加评论\" />\r\n\r\n                    <Button style=\"margin-top: 10px\" type=\"primary\" @click=\"publishComment()\">发表评论</Button>\r\n                </div>\r\n\r\n                <div class=\"comment-section\">\r\n                    <!-- <div class=\"reply-count\">\r\n                        {{total}}条回复\r\n                    </div> -->\r\n\r\n                    <ul class=\"reply-list\">\r\n                        <li v-for=\"(comment, index) in comments\" class=\"reply-item\" :key=\"comment.id\">\r\n                                <div class=\"user\">\r\n                                    <a :href=\"$store.state.userUrlPre+comment.userid\" target=\"_blank\">\r\n                                        <img class=\"avatar\" :src=\"comment.userHeadImg\" :title=\"comment.userName\" />\r\n                                    </a>\r\n                                    <div class=\"title-info\">\r\n                                        <a :href=\"$store.state.userUrlPre+comment.userid\" target=\"_blank\">\r\n                                            <span class=\"user-name\">{{comment.userName}}</span>\r\n                                        </a>\r\n                                        <span># {{index + 1}} 楼 • {{comment.creatTimeBy}}</span>\r\n                                    </div>\r\n                                    <div class=\"title-info-other\">\r\n                                        <span>\r\n                                            <a v-show=\"!comment.showContent\" @click=\"changeContent(index)\">查看回复({{comment.childCommentsCount}})</a>\r\n                                            <a v-show=\"comment.showContent\" @click=\"changeContent(index)\">收起回复</a>\r\n                                            <a @click=\"writeComment(comment,1)\">回复</a>\r\n                                        </span>\r\n                                    </div>\r\n                                </div>\r\n                                <div class=\"reply-info\">\r\n                                    <div class=\"reply-content\">\r\n                                        {{comment.comment}}\r\n                                    </div>\r\n                                </div>\r\n                            <ul v-show=\"comment.showContent\" class=\"reply-child-list\">\r\n                                <li v-for=\"(replyComment,replyIndex) in comment.childComments\" class=\"reply-item\" :key=\"replyComment.id\">\r\n                                    <div class=\"reply-info\">\r\n                                        <div class=\"title-info\">\r\n                                            <a :href=\"$store.state.userUrlPre+replyComment.userid\" target=\"_blank\">\r\n                                                <img class=\"avatar\" :src=\"replyComment.userHeadImg\" :title=\"replyComment.userName\" />\r\n                                            </a>\r\n                                            <div class=\"title-info-right\">\r\n                                                <a :href=\"$store.state.userUrlPre+replyComment.userid\" target=\"_blank\">\r\n                                                    <span class=\"user-name\">{{replyComment.userName}}</span>\r\n                                                </a>\r\n                                                <span>回复</span>\r\n                                                <span class=\"user-name\">{{replyComment.replierName}}:</span>\r\n                                                <span>{{replyComment.comment}}</span>\r\n                                                <span class=\"reply-time\">({{replyComment.creatTimeBy}})</span>\r\n                                                <a @click=\"writeComment(replyComment,2)\">回复</a>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </li>\r\n                            </ul>\r\n                        </li>\r\n                    </ul>\r\n\r\n                    <Page v-if=\"total > 10\" class=\"pagin\" :total=\"total\" size=\"small\" show-elevator @on-change=\"e=>{pageSearch(e)}\" />\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n<script>\r\n    export default {\r\n        data() {\r\n            return {\r\n                articleId: null,\r\n                article: {\r\n                    id: \"\",\r\n                    title: \"\",\r\n                    content: \"\",\r\n                    clickRate: \"\",\r\n                    commentCount: \"\",\r\n                    createTime: \"\",\r\n                    userid: \"\",\r\n                    userName: \"\",\r\n                    userHeadImg: \"\",\r\n                    githuburl: \"\"\r\n                },\r\n                comments: [],\r\n                page: 0,\r\n                pageSize: 10,\r\n                total: 0,\r\n                commentAppend: '',\r\n                commentAppendInput:1,\r\n                appendActive: false,\r\n                articleComment: {\r\n                    articleid: null,\r\n                    articleOwnerId:null,\r\n                    parentid: null,\r\n                    comment: null,\r\n                    replierId: null,\r\n                    replierName: null\r\n                }\r\n            };\r\n        },\r\n        mounted() {\r\n            this.articleId = this.$route.params.id;\r\n            this.getArticle(this.$route.params.id);\r\n            this.getComments();\r\n        },\r\n        methods: {\r\n            getArticle(e) {\r\n                this.axios({\r\n                    method: \"get\",\r\n                    url: \"/public/articles/article/\" + e\r\n                }).then(\r\n                    function (response) {\r\n                        this.articleSet(response.data.data);\r\n                    }.bind(this)\r\n                ).catch(\r\n                    function (error) {\r\n\r\n                    }.bind(this)\r\n                );\r\n            },\r\n            articleSet(e) {\r\n                this.article.id = e.id;\r\n                this.article.title = e.title;\r\n                this.article.content = e.content;\r\n                this.article.clickRate = e.clickRate;\r\n                this.article.commentCount = e.commentCount;\r\n                this.article.createTime = this.dateGet(e.createTime);\r\n                this.article.userid = e.userid;\r\n                this.article.userName = e.userName;\r\n                this.article.userHeadImg = e.userHeadImg;\r\n                this.article.githuburl = e.githuburl;\r\n            },\r\n            articleCommentSet(e) {\r\n                this.articleComment.articleid = e.articleid;\r\n                this.articleComment.parentid = e.parentid;\r\n                this.articleComment.comment = e.comment;\r\n                this.articleComment.replierId = e.replierId;\r\n                this.articleComment.replierName = e.replierName;\r\n                this.articleComment.articleOwnerId = this.article.userid;\r\n            },\r\n            articleCommentInit() {\r\n                this.articleComment.articleid = null;\r\n                this.articleComment.parentid = null;\r\n                this.articleComment.comment = null;\r\n                this.articleComment.replierId = null;\r\n                this.articleComment.replierName = null;\r\n                this.articleComment.articleOwnerId = null;\r\n            },\r\n            getComments() {\r\n                this.axios({\r\n                    method: 'get',\r\n                    url: '/public/article/comment',\r\n                    params: {\r\n                        articleId: this.articleId,\r\n                        page: this.page,\r\n                        pageSize: this.pageSize\r\n                    },\r\n                }).then(\r\n                    function (response) {\r\n                        let data = response.data.data;\r\n                        for (let comment of data.data) {\r\n                            comment.creatTimeBy = this.latestTimeFormat(comment.createTime)\r\n                            comment.showContent = false;\r\n                            for (let replyComment of comment.childComments) {\r\n                                replyComment.creatTimeBy = this.latestTimeFormat(replyComment.createTime);\r\n                            }\r\n                        }\r\n                        this.comments = data.data;\r\n                        this.total = data.totalCount;\r\n                    }.bind(this)\r\n                ).catch(function (error) {\r\n\r\n                    }.bind(this)\r\n                );\r\n            },\r\n            focusInput(event){\r\n                this.commentAppendInput = 3;\r\n            },\r\n            writeComment(e,sign){\r\n                this.commentAppendInput = 3;\r\n\r\n                var anchor = this.$el.querySelector(\"#commentAppendArea\")\r\n                document.body.scrollTop = anchor.offsetTop; // chrome\r\n                this.appendActive = true;\r\n                //document.documentElement.scrollTop = anchor.offsetTop; // firefox\r\n\r\n                if(sign == 1){\r\n                    this.articleComment.articleid = this.articleId;\r\n                    this.articleComment.parentid = e.id;\r\n                    this.articleComment.comment = null;\r\n                    this.articleComment.replierId = e.userid;\r\n                    this.articleComment.replierName = e.userName;\r\n                }else if(sign == 2){\r\n                    this.articleComment.articleid = this.articleId;\r\n                    this.articleComment.parentid = e.parentid;\r\n                    this.articleComment.comment = null;\r\n                    this.articleComment.replierId = e.userid;\r\n                    this.articleComment.replierName = e.userName;\r\n                }\r\n                this.commentAppend = \"[reply]\"+e.userName+\"[/reply]\\n\";\r\n            },\r\n            publishComment() {\r\n                if (this.axios.defaults.headers.common[\"Authorization\"] == null ||this.axios.defaults.headers.common[\"Authorization\"] == \"\"){\r\n                    this.$Message.error('请登录');\r\n                    return;\r\n                }\r\n                if(this.commentAppend == null || this.commentAppend == ''){\r\n                    this.$Message.error('请输入评论');\r\n                    return;\r\n                }\r\n\r\n                if(this.articleComment.replierName != null){\r\n                    var str = this.commentAppend.substring(0,15+this.articleComment.replierName.length);\r\n                    var validate = \"[reply]\"+this.articleComment.replierName+\"[/reply]\";\r\n                    if(str == validate){\r\n                        this.articleComment.comment = this.commentAppend.substring(str.length);\r\n                        this.articleComment.articleOwnerId = this.article.userid;\r\n                        this.postComment(this.articleComment);\r\n                    }else {\r\n                        this.postComment({\r\n                        articleid:this.articleId,\r\n                        comment:this.commentAppend,\r\n                        articleOwnerId:this.article.userid});\r\n                    }\r\n                }else {\r\n                    this.postComment({\r\n                        articleid:this.articleId,\r\n                        comment:this.commentAppend,\r\n                        articleOwnerId:this.article.userid});\r\n                }\r\n            },\r\n            postComment(e){\r\n                this.axios({\r\n                    method: 'post',\r\n                    url: '/article/comment',\r\n                    data: e\r\n                }).then(function (response) {\r\n                    this.$Message.success('评论成功');\r\n                    this.getComments();\r\n                    this.articleCommentInit();\r\n                    this.commentAppend = null;\r\n                }.bind(this)).catch(function () {\r\n                    this.$Message.error('评论失败，请稍后重试！');\r\n                }.bind(this));\r\n            },\r\n            changeContent(index){\r\n                var temp = this.comments[index];\r\n                temp.showContent = ! temp.showContent;\r\n                this.comments.splice(index,1,temp);\r\n            },\r\n            pageSearch(e) {\r\n              this.page = e - 1;\r\n              this.getComments();\r\n            }\r\n        }\r\n    };\r\n</script>\r\n"],"sourceRoot":"src/views/article/pc"}]}